{
  "address": "0xcbD9A79Caa0d354C9119039F5004DbCf23489c9a",
  "abi": [
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "_owner",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "_keeper",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "_feeRecipient",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "_managementFee",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_performanceFee",
              "type": "uint256"
            },
            {
              "internalType": "string",
              "name": "_tokenName",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "_tokenSymbol",
              "type": "string"
            },
            {
              "internalType": "address",
              "name": "_optionsPremiumPricer",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "_strikeSelection",
              "type": "address"
            },
            {
              "internalType": "uint32",
              "name": "_premiumDiscount",
              "type": "uint32"
            },
            {
              "internalType": "uint256",
              "name": "_auctionDuration",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_period",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_maxDepositors",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_minDeposit",
              "type": "uint256"
            }
          ],
          "internalType": "struct VaultLifecycleTreasury.InitParams",
          "name": "_initParams",
          "type": "tuple"
        },
        {
          "components": [
            {
              "internalType": "bool",
              "name": "isPut",
              "type": "bool"
            },
            {
              "internalType": "uint8",
              "name": "decimals",
              "type": "uint8"
            },
            {
              "internalType": "address",
              "name": "asset",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "underlying",
              "type": "address"
            },
            {
              "internalType": "uint56",
              "name": "minimumSupply",
              "type": "uint56"
            },
            {
              "internalType": "uint104",
              "name": "cap",
              "type": "uint104"
            }
          ],
          "internalType": "struct Vault.VaultParams",
          "name": "_vaultParams",
          "type": "tuple"
        },
        {
          "internalType": "uint256",
          "name": "_min_auction_duration",
          "type": "uint256"
        }
      ],
      "name": "verifyInitializerParams",
      "outputs": [],
      "stateMutability": "pure",
      "type": "function"
    }
  ],
  "transactionHash": "0xee37d514c038fd6dc5ada957248097d4d2f22ada32f2ab6c44cdb94258da0cd9",
  "receipt": {
    "to": null,
    "from": "0x422f7Bb366608723c8fe61Ac6D923023dCCBC3d7",
    "contractAddress": "0xcbD9A79Caa0d354C9119039F5004DbCf23489c9a",
    "transactionIndex": 186,
    "gasUsed": "4151058",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xaf2b63be3b247bcaff06cdc85f15a0015f060af3c84b4897c6e22ccc7a76dc2d",
    "transactionHash": "0xee37d514c038fd6dc5ada957248097d4d2f22ada32f2ab6c44cdb94258da0cd9",
    "logs": [],
    "blockNumber": 14665156,
    "cumulativeGasUsed": "24729215",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "solcInputHash": "2232ccc9eb94ff79a1f5b977eab072e9",
  "metadata": "{\"compiler\":{\"version\":\"0.8.4+commit.c7e474f2\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_keeper\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_feeRecipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_managementFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_performanceFee\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"_tokenName\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_tokenSymbol\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"_optionsPremiumPricer\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_strikeSelection\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"_premiumDiscount\",\"type\":\"uint32\"},{\"internalType\":\"uint256\",\"name\":\"_auctionDuration\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_period\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_maxDepositors\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_minDeposit\",\"type\":\"uint256\"}],\"internalType\":\"struct VaultLifecycleTreasury.InitParams\",\"name\":\"_initParams\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"bool\",\"name\":\"isPut\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"decimals\",\"type\":\"uint8\"},{\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"underlying\",\"type\":\"address\"},{\"internalType\":\"uint56\",\"name\":\"minimumSupply\",\"type\":\"uint56\"},{\"internalType\":\"uint104\",\"name\":\"cap\",\"type\":\"uint104\"}],\"internalType\":\"struct Vault.VaultParams\",\"name\":\"_vaultParams\",\"type\":\"tuple\"},{\"internalType\":\"uint256\",\"name\":\"_min_auction_duration\",\"type\":\"uint256\"}],\"name\":\"verifyInitializerParams\",\"outputs\":[],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"burnOtokens(address,address)\":{\"params\":{\"currentOption\":\"is the address of the current option\",\"gammaController\":\"is the address of the opyn controller contract\"},\"returns\":{\"_0\":\"amount of collateral redeemed by burning otokens\"}},\"claimAuctionOtokens(Vault.AuctionSellOrder,address,address)\":{\"params\":{\"auctionSellOrder\":\"is the sell order of the bid\",\"counterpartyThetaVault\":\"is the address of the counterparty theta vault of this delta vault\",\"gnosisEasyAuction\":\"is the address of the gnosis auction contract holding custody to the funds\"}},\"commitAndClose(address,address,uint256,VaultLifecycleTreasury.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)\":{\"params\":{\"closeParams\":\"is the struct with details on previous option and strike selection details\",\"optionsPremiumPricer\":\"is the address of the contract with the black-scholes premium calculation logic\",\"premiumDiscount\":\"is the vault's discount applied to the premium\",\"strikeSelection\":\"is the address of the contract with strike selection logic\",\"vaultParams\":\"is the struct with vault general data\",\"vaultState\":\"is the struct with vault accounting state\"},\"returns\":{\"delta\":\"is the delta of the new option\",\"otokenAddress\":\"is the address of the new option\",\"premium\":\"is the premium of the new option\",\"strikePrice\":\"is the strike price of the new option\"}},\"createShort(address,address,address,uint256)\":{\"params\":{\"depositAmount\":\"is the amount of collateral to deposit\",\"gammaController\":\"is the address of the opyn controller contract\",\"marginPool\":\"is the address of the opyn margin contract which holds the collateral\",\"oTokenAddress\":\"is the address of the otoken to mint\"},\"returns\":{\"_0\":\"the otoken mint amount\"}},\"placeBid(GnosisAuction.BidDetails)\":{\"params\":{\"bidDetails\":\"is the struct with all the details of the bid including the auction's id and how much to bid\"}},\"rollover(Vault.VaultState storage,VaultLifecycleTreasury.RolloverParams)\":{\"params\":{\"params\":\"is the rollover parameters passed to compute the next state\",\"vaultState\":\"is the storage variable vaultState passed from RibbonVault\"},\"returns\":{\"managementFeeInAsset\":\"is the amount of management fee charged by vault\",\"mintShares\":\"is the amount of shares to mint from deposits\",\"newLockedAmount\":\"is the amount of funds to allocate for the new round\",\"newPricePerShare\":\"is the price per share of the new round\",\"queuedWithdrawAmount\":\"is the amount of funds set aside for withdrawal\"}},\"settleLong(address,address,address)\":{\"params\":{\"asset\":\"is the address of the vault's asset\",\"gammaController\":\"is the address of the opyn controller contract\",\"oldOption\":\"is the address of the old option\"},\"returns\":{\"_0\":\"amount of asset received by exercising the option\"}},\"settleShort(address)\":{\"params\":{\"gammaController\":\"is the address of the opyn controller contract\"},\"returns\":{\"_0\":\"amount of collateral redeemed from the vault\"}},\"startAuction(GnosisAuction.AuctionDetails)\":{\"params\":{\"auctionDetails\":\"is the struct with all the custom parameters of the auction\"},\"returns\":{\"_0\":\"the auction id of the newly created auction\"}},\"verifyInitializerParams(VaultLifecycleTreasury.InitParams,Vault.VaultParams,uint256)\":{\"params\":{\"_initParams\":\"is the initialization parameter including owner, keeper, etc.\",\"_vaultParams\":\"is the struct with vault general data\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"burnOtokens(address,address)\":{\"notice\":\"Burn the remaining oTokens left over from auction. Currently this implementation is simple. It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time.\"},\"claimAuctionOtokens(Vault.AuctionSellOrder,address,address)\":{\"notice\":\"Claims the oTokens belonging to the vault\"},\"commitAndClose(address,address,uint256,VaultLifecycleTreasury.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)\":{\"notice\":\"Sets the next option the vault will be shorting, and calculates its premium for the auction\"},\"createShort(address,address,address,uint256)\":{\"notice\":\"Creates the actual Opyn short position by depositing collateral and minting otokens\"},\"placeBid(GnosisAuction.BidDetails)\":{\"notice\":\"Places a bid in an auction\"},\"rollover(Vault.VaultState storage,VaultLifecycleTreasury.RolloverParams)\":{\"notice\":\"Calculate the shares to mint, new price per share, and amount of funds to re-allocate as collateral for the new round\"},\"settleLong(address,address,address)\":{\"notice\":\"Exercises the ITM option using existing long otoken position. Currently this implementation is simple. It calls the `Redeem` action to claim the payout.\"},\"settleShort(address)\":{\"notice\":\"Close the existing short otoken position. Currently this implementation is simple. It closes the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by calling SettleVault action, this assumption should hold.\"},\"startAuction(GnosisAuction.AuctionDetails)\":{\"notice\":\"Starts the gnosis auction\"},\"verifyInitializerParams(VaultLifecycleTreasury.InitParams,Vault.VaultParams,uint256)\":{\"notice\":\"Verify the constructor params satisfy requirements\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/libraries/VaultLifecycleTreasury.sol\":\"VaultLifecycleTreasury\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `recipient`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `sender` to `recipient` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address sender,\\n        address recipient,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0x027b891937d20ccf213fdb9c31531574256de774bda99d3a70ecef6e1913ed2a\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC20.sol\\\";\\nimport \\\"../../../utils/Address.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using Address for address;\\n\\n    function safeTransfer(\\n        IERC20 token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));\\n    }\\n\\n    function safeTransferFrom(\\n        IERC20 token,\\n        address from,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transferFrom.selector, from, to, value));\\n    }\\n\\n    /**\\n     * @dev Deprecated. This function has issues similar to the ones found in\\n     * {IERC20-approve}, and its usage is discouraged.\\n     *\\n     * Whenever possible, use {safeIncreaseAllowance} and\\n     * {safeDecreaseAllowance} instead.\\n     */\\n    function safeApprove(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        // safeApprove should only be called when setting an initial allowance,\\n        // or when resetting it to zero. To increase and decrease it, use\\n        // 'safeIncreaseAllowance' and 'safeDecreaseAllowance'\\n        require(\\n            (value == 0) || (token.allowance(address(this), spender) == 0),\\n            \\\"SafeERC20: approve from non-zero to non-zero allowance\\\"\\n        );\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));\\n    }\\n\\n    function safeIncreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        uint256 newAllowance = token.allowance(address(this), spender) + value;\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n    }\\n\\n    function safeDecreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        unchecked {\\n            uint256 oldAllowance = token.allowance(address(this), spender);\\n            require(oldAllowance >= value, \\\"SafeERC20: decreased allowance below zero\\\");\\n            uint256 newAllowance = oldAllowance - value;\\n            _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address.functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data, \\\"SafeERC20: low-level call failed\\\");\\n        if (returndata.length > 0) {\\n            // Return data is optional\\n            require(abi.decode(returndata, (bool)), \\\"SafeERC20: ERC20 operation did not succeed\\\");\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x02348b2e4b9f3200c7e3907c5c2661643a6d8520e9f79939fbb9b4005a54894d\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // This method relies on extcodesize, which returns 0 for contracts in\\n        // construction, since the code is only stored at the end of the\\n        // constructor execution.\\n\\n        uint256 size;\\n        assembly {\\n            size := extcodesize(account)\\n        }\\n        return size > 0;\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason, it is bubbled up by this\\n     * function (like regular Solidity function calls).\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCall(target, data, \\\"Address: low-level call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with\\n     * `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, value, \\\"Address: low-level call with value failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but\\n     * with `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(address(this).balance >= value, \\\"Address: insufficient balance for call\\\");\\n        require(isContract(target), \\\"Address: call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        return functionStaticCall(target, data, \\\"Address: low-level static call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        require(isContract(target), \\\"Address: static call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionDelegateCall(target, data, \\\"Address: low-level delegate call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(isContract(target), \\\"Address: delegate call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Tool to verifies that a low level call was successful, and revert if it wasn't, either by bubbling the\\n     * revert reason using the provided one.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function verifyCallResult(\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal pure returns (bytes memory) {\\n        if (success) {\\n            return returndata;\\n        } else {\\n            // Look for revert reason and bubble it up if present\\n            if (returndata.length > 0) {\\n                // The easiest way to bubble the revert reason is using memory via assembly\\n\\n                assembly {\\n                    let returndata_size := mload(returndata)\\n                    revert(add(32, returndata), returndata_size)\\n                }\\n            } else {\\n                revert(errorMessage);\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x3336baae5cf23e94274d75336e2d412193be508504aee185e61dc7d58cd05c8a\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/math/SafeMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n// CAUTION\\n// This version of SafeMath should only be used with Solidity 0.8 or later,\\n// because it relies on the compiler's built in overflow checks.\\n\\n/**\\n * @dev Wrappers over Solidity's arithmetic operations.\\n *\\n * NOTE: `SafeMath` is no longer needed starting with Solidity 0.8. The compiler\\n * now has built in overflow checking.\\n */\\nlibrary SafeMath {\\n    /**\\n     * @dev Returns the addition of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            uint256 c = a + b;\\n            if (c < a) return (false, 0);\\n            return (true, c);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the substraction of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b > a) return (false, 0);\\n            return (true, a - b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\\n            // benefit is lost if 'b' is also tested.\\n            // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522\\n            if (a == 0) return (true, 0);\\n            uint256 c = a * b;\\n            if (c / a != b) return (false, 0);\\n            return (true, c);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the division of two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b == 0) return (false, 0);\\n            return (true, a / b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b == 0) return (false, 0);\\n            return (true, a % b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the addition of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `+` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Addition cannot overflow.\\n     */\\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a + b;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting on\\n     * overflow (when the result is negative).\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a - b;\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `*` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Multiplication cannot overflow.\\n     */\\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a * b;\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a / b;\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting when dividing by zero.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a % b;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on\\n     * overflow (when the result is negative).\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {trySub}.\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b <= a, errorMessage);\\n            return a - b;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting with custom message on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b > 0, errorMessage);\\n            return a / b;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting with custom message when dividing by zero.\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {tryMod}.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b > 0, errorMessage);\\n            return a % b;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x8666f020bd8fc9dc14f07e2ebc52b5f236ab4cdde7c77679b08cb2f94730043b\",\"license\":\"MIT\"},\"contracts/interfaces/GammaInterface.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nlibrary GammaTypes {\\n    // vault is a struct of 6 arrays that describe a position a user has, a user can have multiple vaults.\\n    struct Vault {\\n        // addresses of oTokens a user has shorted (i.e. written) against this vault\\n        address[] shortOtokens;\\n        // addresses of oTokens a user has bought and deposited in this vault\\n        // user can be long oTokens without opening a vault (e.g. by buying on a DEX)\\n        // generally, long oTokens will be 'deposited' in vaults to act as collateral\\n        // in order to write oTokens against (i.e. in spreads)\\n        address[] longOtokens;\\n        // addresses of other ERC-20s a user has deposited as collateral in this vault\\n        address[] collateralAssets;\\n        // quantity of oTokens minted/written for each oToken address in shortOtokens\\n        uint256[] shortAmounts;\\n        // quantity of oTokens owned and held in the vault for each oToken address in longOtokens\\n        uint256[] longAmounts;\\n        // quantity of ERC-20 deposited as collateral in the vault for each ERC-20 address in collateralAssets\\n        uint256[] collateralAmounts;\\n    }\\n}\\n\\ninterface IOtoken {\\n    function underlyingAsset() external view returns (address);\\n\\n    function strikeAsset() external view returns (address);\\n\\n    function collateralAsset() external view returns (address);\\n\\n    function strikePrice() external view returns (uint256);\\n\\n    function expiryTimestamp() external view returns (uint256);\\n\\n    function isPut() external view returns (bool);\\n}\\n\\ninterface IOtokenFactory {\\n    function getOtoken(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external view returns (address);\\n\\n    function createOtoken(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external returns (address);\\n\\n    function getTargetOtokenAddress(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external view returns (address);\\n\\n    event OtokenCreated(\\n        address tokenAddress,\\n        address creator,\\n        address indexed underlying,\\n        address indexed strike,\\n        address indexed collateral,\\n        uint256 strikePrice,\\n        uint256 expiry,\\n        bool isPut\\n    );\\n}\\n\\ninterface IController {\\n    // possible actions that can be performed\\n    enum ActionType {\\n        OpenVault,\\n        MintShortOption,\\n        BurnShortOption,\\n        DepositLongOption,\\n        WithdrawLongOption,\\n        DepositCollateral,\\n        WithdrawCollateral,\\n        SettleVault,\\n        Redeem,\\n        Call,\\n        Liquidate\\n    }\\n\\n    struct ActionArgs {\\n        // type of action that is being performed on the system\\n        ActionType actionType;\\n        // address of the account owner\\n        address owner;\\n        // address which we move assets from or to (depending on the action type)\\n        address secondAddress;\\n        // asset that is to be transfered\\n        address asset;\\n        // index of the vault that is to be modified (if any)\\n        uint256 vaultId;\\n        // amount of asset that is to be transfered\\n        uint256 amount;\\n        // each vault can hold multiple short / long / collateral assets\\n        // but we are restricting the scope to only 1 of each in this version\\n        // in future versions this would be the index of the short / long / collateral asset that needs to be modified\\n        uint256 index;\\n        // any other data that needs to be passed in for arbitrary function calls\\n        bytes data;\\n    }\\n\\n    struct RedeemArgs {\\n        // address to which we pay out the oToken proceeds\\n        address receiver;\\n        // oToken that is to be redeemed\\n        address otoken;\\n        // amount of oTokens that is to be redeemed\\n        uint256 amount;\\n    }\\n\\n    function getPayout(address _otoken, uint256 _amount)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function operate(ActionArgs[] calldata _actions) external;\\n\\n    function getAccountVaultCounter(address owner)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function oracle() external view returns (address);\\n\\n    function getVault(address _owner, uint256 _vaultId)\\n        external\\n        view\\n        returns (GammaTypes.Vault memory);\\n\\n    function getProceed(address _owner, uint256 _vaultId)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function isSettlementAllowed(\\n        address _underlying,\\n        address _strike,\\n        address _collateral,\\n        uint256 _expiry\\n    ) external view returns (bool);\\n}\\n\\ninterface IOracle {\\n    function setAssetPricer(address _asset, address _pricer) external;\\n\\n    function updateAssetPricer(address _asset, address _pricer) external;\\n\\n    function getPrice(address _asset) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x148930e8fd36c64b8dbe75c2ba71117eaf4a6da5a019e08f3ff8161b274785ba\",\"license\":\"MIT\"},\"contracts/interfaces/IERC20Detailed.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\ninterface IERC20Detailed is IERC20 {\\n    function decimals() external view returns (uint8);\\n\\n    function symbol() external view returns (string calldata);\\n\\n    function name() external view returns (string calldata);\\n}\\n\",\"keccak256\":\"0x90fd29862ecc4bc1f2ee3e4d5c42364c5fbcc0f43f907d2bb82665f93df0d218\",\"license\":\"MIT\"},\"contracts/interfaces/IGnosisAuction.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\nlibrary AuctionType {\\n    struct AuctionData {\\n        IERC20 auctioningToken;\\n        IERC20 biddingToken;\\n        uint256 orderCancellationEndDate;\\n        uint256 auctionEndDate;\\n        bytes32 initialAuctionOrder;\\n        uint256 minimumBiddingAmountPerOrder;\\n        uint256 interimSumBidAmount;\\n        bytes32 interimOrder;\\n        bytes32 clearingPriceOrder;\\n        uint96 volumeClearingPriceOrder;\\n        bool minFundingThresholdNotReached;\\n        bool isAtomicClosureAllowed;\\n        uint256 feeNumerator;\\n        uint256 minFundingThreshold;\\n    }\\n}\\n\\ninterface IGnosisAuction {\\n    function initiateAuction(\\n        address _auctioningToken,\\n        address _biddingToken,\\n        uint256 orderCancellationEndDate,\\n        uint256 auctionEndDate,\\n        uint96 _auctionedSellAmount,\\n        uint96 _minBuyAmount,\\n        uint256 minimumBiddingAmountPerOrder,\\n        uint256 minFundingThreshold,\\n        bool isAtomicClosureAllowed,\\n        address accessManagerContract,\\n        bytes memory accessManagerContractData\\n    ) external returns (uint256);\\n\\n    function auctionCounter() external view returns (uint256);\\n\\n    function auctionData(uint256 auctionId)\\n        external\\n        view\\n        returns (AuctionType.AuctionData memory);\\n\\n    function auctionAccessManager(uint256 auctionId)\\n        external\\n        view\\n        returns (address);\\n\\n    function auctionAccessData(uint256 auctionId)\\n        external\\n        view\\n        returns (bytes memory);\\n\\n    function FEE_DENOMINATOR() external view returns (uint256);\\n\\n    function feeNumerator() external view returns (uint256);\\n\\n    function settleAuction(uint256 auctionId) external returns (bytes32);\\n\\n    function placeSellOrders(\\n        uint256 auctionId,\\n        uint96[] memory _minBuyAmounts,\\n        uint96[] memory _sellAmounts,\\n        bytes32[] memory _prevSellOrders,\\n        bytes calldata allowListCallData\\n    ) external returns (uint64);\\n\\n    function claimFromParticipantOrder(\\n        uint256 auctionId,\\n        bytes32[] memory orders\\n    ) external returns (uint256, uint256);\\n}\\n\",\"keccak256\":\"0x226639ee48018ec78891a829816799c9b9f6bbec7e84c4ca43cdc7dc8a07628f\",\"license\":\"MIT\"},\"contracts/interfaces/IRibbon.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\nimport {Vault} from \\\"../libraries/Vault.sol\\\";\\n\\ninterface IRibbonVault {\\n    function deposit(uint256 amount) external;\\n\\n    function depositETH() external payable;\\n\\n    function cap() external view returns (uint256);\\n\\n    function depositFor(uint256 amount, address creditor) external;\\n\\n    function vaultParams() external view returns (Vault.VaultParams memory);\\n}\\n\\ninterface IStrikeSelection {\\n    function getStrikePrice(uint256 expiryTimestamp, bool isPut)\\n        external\\n        view\\n        returns (uint256, uint256);\\n\\n    function delta() external view returns (uint256);\\n}\\n\\ninterface IOptionsPremiumPricer {\\n    function getPremium(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getPremiumInStables(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getOptionDelta(\\n        uint256 spotPrice,\\n        uint256 strikePrice,\\n        uint256 volatility,\\n        uint256 expiryTimestamp\\n    ) external view returns (uint256 delta);\\n\\n    function getUnderlyingPrice() external view returns (uint256);\\n\\n    function priceOracle() external view returns (address);\\n\\n    function volatilityOracle() external view returns (address);\\n\\n    function optionId() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0xd9ffea587ce992000d8a9f8d4b1bc8c40008633c35121b3d11ab8c6a7dd5ecbc\",\"license\":\"MIT\"},\"contracts/interfaces/IRibbonThetaVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {Vault} from \\\"../libraries/Vault.sol\\\";\\n\\ninterface IRibbonThetaVault {\\n    function currentOption() external view returns (address);\\n\\n    function nextOption() external view returns (address);\\n\\n    function vaultParams() external view returns (Vault.VaultParams memory);\\n\\n    function vaultState() external view returns (Vault.VaultState memory);\\n\\n    function optionState() external view returns (Vault.OptionState memory);\\n\\n    function optionAuctionID() external view returns (uint256);\\n\\n    function pricePerShare() external view returns (uint256);\\n\\n    function roundPricePerShare(uint256) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x971c0b438d7931eb53ae8f57a15304db62917845b36ebef3d501a5f1628c82e3\",\"license\":\"MIT\"},\"contracts/libraries/DateTime.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// Source: https://github.com/bokkypoobah/BokkyPooBahsDateTimeLibrary\\n// ----------------------------------------------------------------------------\\n// BokkyPooBah's DateTime Library v1.01\\n// ----------------------------------------------------------------------------\\n\\npragma solidity =0.8.4;\\n\\nlibrary DateTime {\\n    uint256 constant SECONDS_PER_DAY = 24 * 60 * 60;\\n    uint256 constant SECONDS_PER_HOUR = 60 * 60;\\n    uint256 constant SECONDS_PER_MINUTE = 60;\\n    int256 constant OFFSET19700101 = 2440588;\\n\\n    uint256 constant DOW_MON = 1;\\n    uint256 constant DOW_TUE = 2;\\n    uint256 constant DOW_WED = 3;\\n    uint256 constant DOW_THU = 4;\\n    uint256 constant DOW_FRI = 5;\\n    uint256 constant DOW_SAT = 6;\\n    uint256 constant DOW_SUN = 7;\\n\\n    // ------------------------------------------------------------------------\\n    // Calculate the number of days from 1970/01/01 to year/month/day using\\n    // the date conversion algorithm from\\n    //   http://aa.usno.navy.mil/faq/docs/JD_Formula.php\\n    // and subtracting the offset 2440588 so that 1970/01/01 is day 0\\n    //\\n    // days = day\\n    //      - 32075\\n    //      + 1461 * (year + 4800 + (month - 14) / 12) / 4\\n    //      + 367 * (month - 2 - (month - 14) / 12 * 12) / 12\\n    //      - 3 * ((year + 4900 + (month - 14) / 12) / 100) / 4\\n    //      - offset\\n    // ------------------------------------------------------------------------\\n    function _daysFromDate(\\n        uint256 year,\\n        uint256 month,\\n        uint256 day\\n    ) internal pure returns (uint256 _days) {\\n        require(year >= 1970);\\n        int256 _year = int256(year);\\n        int256 _month = int256(month);\\n        int256 _day = int256(day);\\n\\n        int256 __days =\\n            _day -\\n                32075 +\\n                (1461 * (_year + 4800 + (_month - 14) / 12)) /\\n                4 +\\n                (367 * (_month - 2 - ((_month - 14) / 12) * 12)) /\\n                12 -\\n                (3 * ((_year + 4900 + (_month - 14) / 12) / 100)) /\\n                4 -\\n                OFFSET19700101;\\n\\n        _days = uint256(__days);\\n    }\\n\\n    // ------------------------------------------------------------------------\\n    // Calculate year/month/day from the number of days since 1970/01/01 using\\n    // the date conversion algorithm from\\n    //   http://aa.usno.navy.mil/faq/docs/JD_Formula.php\\n    // and adding the offset 2440588 so that 1970/01/01 is day 0\\n    //\\n    // int L = days + 68569 + offset\\n    // int N = 4 * L / 146097\\n    // L = L - (146097 * N + 3) / 4\\n    // year = 4000 * (L + 1) / 1461001\\n    // L = L - 1461 * year / 4 + 31\\n    // month = 80 * L / 2447\\n    // dd = L - 2447 * month / 80\\n    // L = month / 11\\n    // month = month + 2 - 12 * L\\n    // year = 100 * (N - 49) + year + L\\n    // ------------------------------------------------------------------------\\n    function _daysToDate(uint256 _days)\\n        internal\\n        pure\\n        returns (\\n            uint256 year,\\n            uint256 month,\\n            uint256 day\\n        )\\n    {\\n        int256 __days = int256(_days);\\n\\n        int256 L = __days + 68569 + OFFSET19700101;\\n        int256 N = (4 * L) / 146097;\\n        L = L - (146097 * N + 3) / 4;\\n        int256 _year = (4000 * (L + 1)) / 1461001;\\n        L = L - (1461 * _year) / 4 + 31;\\n        int256 _month = (80 * L) / 2447;\\n        int256 _day = L - (2447 * _month) / 80;\\n        L = _month / 11;\\n        _month = _month + 2 - 12 * L;\\n        _year = 100 * (N - 49) + _year + L;\\n\\n        year = uint256(_year);\\n        month = uint256(_month);\\n        day = uint256(_day);\\n    }\\n\\n    function isLeapYear(uint256 timestamp)\\n        internal\\n        pure\\n        returns (bool leapYear)\\n    {\\n        (uint256 year, , ) = _daysToDate(timestamp / SECONDS_PER_DAY);\\n        leapYear = _isLeapYear(year);\\n    }\\n\\n    function _isLeapYear(uint256 year) internal pure returns (bool leapYear) {\\n        leapYear = ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);\\n    }\\n\\n    function getDaysInMonth(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256 daysInMonth)\\n    {\\n        (uint256 year, uint256 month, ) =\\n            _daysToDate(timestamp / SECONDS_PER_DAY);\\n        daysInMonth = _getDaysInMonth(year, month);\\n    }\\n\\n    function _getDaysInMonth(uint256 year, uint256 month)\\n        internal\\n        pure\\n        returns (uint256 daysInMonth)\\n    {\\n        if (\\n            month == 1 ||\\n            month == 3 ||\\n            month == 5 ||\\n            month == 7 ||\\n            month == 8 ||\\n            month == 10 ||\\n            month == 12\\n        ) {\\n            daysInMonth = 31;\\n        } else if (month != 2) {\\n            daysInMonth = 30;\\n        } else {\\n            daysInMonth = _isLeapYear(year) ? 29 : 28;\\n        }\\n    }\\n\\n    // 1 = Monday, 7 = Sunday\\n    function getDayOfWeek(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256 dayOfWeek)\\n    {\\n        uint256 _days = timestamp / SECONDS_PER_DAY;\\n        dayOfWeek = ((_days + 3) % 7) + 1;\\n    }\\n\\n    function getYear(uint256 timestamp) internal pure returns (uint256 year) {\\n        (year, , ) = _daysToDate(timestamp / SECONDS_PER_DAY);\\n    }\\n\\n    function getMonth(uint256 timestamp) internal pure returns (uint256 month) {\\n        (, month, ) = _daysToDate(timestamp / SECONDS_PER_DAY);\\n    }\\n\\n    function getDay(uint256 timestamp) internal pure returns (uint256 day) {\\n        (, , day) = _daysToDate(timestamp / SECONDS_PER_DAY);\\n    }\\n\\n    function timestampFromDate(\\n        uint256 year,\\n        uint256 month,\\n        uint256 day\\n    ) internal pure returns (uint256 timestamp) {\\n        timestamp = _daysFromDate(year, month, day) * SECONDS_PER_DAY;\\n    }\\n\\n    /**\\n     * @notice Gets the Friday of the same week\\n     * @param timestamp is the given date and time\\n     * @return the Friday of the same week in unix time\\n     */\\n    function getThisWeekFriday(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return timestamp + 5 days - getDayOfWeek(timestamp) * 1 days;\\n    }\\n\\n    /**\\n     * @notice Gets the next friday after the given date and time\\n     * @param timestamp is the given date and time\\n     * @return the next friday after the given date and time\\n     */\\n    function getNextFriday(uint256 timestamp) internal pure returns (uint256) {\\n        uint256 friday = getThisWeekFriday(timestamp);\\n        return friday >= timestamp ? friday : friday + 1 weeks;\\n    }\\n\\n    /**\\n     * @notice Gets the last day of the month\\n     * @param timestamp is the given date and time\\n     * @return the last day of the same month in unix time\\n     */\\n    function getLastDayOfMonth(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return\\n            timestampFromDate(getYear(timestamp), getMonth(timestamp) + 1, 1) -\\n            1 days;\\n    }\\n\\n    /**\\n     * @notice Gets the last Friday of the month\\n     * @param timestamp is the given date and time\\n     * @return the last Friday of the same month in unix time\\n     */\\n    function getMonthLastFriday(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        uint256 lastDay = getLastDayOfMonth(timestamp);\\n        uint256 friday = getThisWeekFriday(lastDay);\\n\\n        return friday > lastDay ? friday - 1 weeks : friday;\\n    }\\n\\n    /**\\n     * @notice Gets the last Friday of the quarter\\n     * @param timestamp is the given date and time\\n     * @return the last Friday of the quarter in unix time\\n     */\\n    function getQuarterLastFriday(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        uint256 month = getMonth(timestamp);\\n        uint256 quarterMonth =\\n            (month <= 3) ? 3 : (month <= 6) ? 6 : (month <= 9) ? 9 : 12;\\n\\n        uint256 quarterDate =\\n            timestampFromDate(getYear(timestamp), quarterMonth, 1);\\n\\n        return getMonthLastFriday(quarterDate);\\n    }\\n\\n    /**\\n     * @notice Gets the last Friday of the half-year\\n     * @param timestamp is the given date and time\\n     * @return the last friday of the half-year\\n     */\\n    function getBiannualLastFriday(uint256 timestamp)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        uint256 month = getMonth(timestamp);\\n        uint256 biannualMonth = (month <= 6) ? 6 : 12;\\n\\n        uint256 biannualDate =\\n            timestampFromDate(getYear(timestamp), biannualMonth, 1);\\n\\n        return getMonthLastFriday(biannualDate);\\n    }\\n}\\n\",\"keccak256\":\"0x7a018a112d5772e50a7ffb5c18ebef9e76bc939ec60d0d34d384440bb09bdc46\",\"license\":\"MIT\"},\"contracts/libraries/GnosisAuction.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {SafeMath} from \\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\\";\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {\\n    SafeERC20\\n} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\nimport {DSMath} from \\\"../vendor/DSMath.sol\\\";\\nimport {IGnosisAuction} from \\\"../interfaces/IGnosisAuction.sol\\\";\\nimport {IOtoken} from \\\"../interfaces/GammaInterface.sol\\\";\\nimport {IOptionsPremiumPricer} from \\\"../interfaces/IRibbon.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\nimport {IRibbonThetaVault} from \\\"../interfaces/IRibbonThetaVault.sol\\\";\\n\\nlibrary GnosisAuction {\\n    using SafeMath for uint256;\\n    using SafeERC20 for IERC20;\\n\\n    event InitiateGnosisAuction(\\n        address indexed auctioningToken,\\n        address indexed biddingToken,\\n        uint256 auctionCounter,\\n        address indexed manager\\n    );\\n\\n    event PlaceAuctionBid(\\n        uint256 auctionId,\\n        address indexed auctioningToken,\\n        uint256 sellAmount,\\n        uint256 buyAmount,\\n        address indexed bidder\\n    );\\n\\n    struct AuctionDetails {\\n        address oTokenAddress;\\n        address gnosisEasyAuction;\\n        address asset;\\n        uint256 assetDecimals;\\n        uint256 oTokenPremium;\\n        uint256 duration;\\n    }\\n\\n    struct BidDetails {\\n        address oTokenAddress;\\n        address gnosisEasyAuction;\\n        address asset;\\n        uint256 assetDecimals;\\n        uint256 auctionId;\\n        uint256 lockedBalance;\\n        uint256 optionAllocation;\\n        uint256 optionPremium;\\n        address bidder;\\n    }\\n\\n    function startAuction(AuctionDetails calldata auctionDetails)\\n        internal\\n        returns (uint256 auctionID)\\n    {\\n        uint256 oTokenSellAmount =\\n            getOTokenSellAmount(auctionDetails.oTokenAddress);\\n        require(oTokenSellAmount > 0, \\\"No otokens to sell\\\");\\n\\n        IERC20(auctionDetails.oTokenAddress).safeApprove(\\n            auctionDetails.gnosisEasyAuction,\\n            IERC20(auctionDetails.oTokenAddress).balanceOf(address(this))\\n        );\\n\\n        // minBidAmount is total oTokens to sell * premium per oToken\\n        // shift decimals to correspond to decimals of USDC for puts\\n        // and underlying for calls\\n        uint256 minBidAmount =\\n            DSMath.wmul(\\n                oTokenSellAmount.mul(10**10),\\n                auctionDetails.oTokenPremium\\n            );\\n\\n        minBidAmount = auctionDetails.assetDecimals > 18\\n            ? minBidAmount.mul(10**(auctionDetails.assetDecimals.sub(18)))\\n            : minBidAmount.div(\\n                10**(uint256(18).sub(auctionDetails.assetDecimals))\\n            );\\n\\n        require(\\n            minBidAmount <= type(uint96).max,\\n            \\\"optionPremium * oTokenSellAmount > type(uint96) max value!\\\"\\n        );\\n\\n        uint256 auctionEnd = block.timestamp.add(auctionDetails.duration);\\n\\n        auctionID = IGnosisAuction(auctionDetails.gnosisEasyAuction)\\n            .initiateAuction(\\n            // address of oToken we minted and are selling\\n            auctionDetails.oTokenAddress,\\n            // address of asset we want in exchange for oTokens. Should match vault `asset`\\n            auctionDetails.asset,\\n            // orders can be cancelled at any time during the auction\\n            auctionEnd,\\n            // order will last for `duration`\\n            auctionEnd,\\n            // we are selling all of the otokens minus a fee taken by gnosis\\n            uint96(oTokenSellAmount),\\n            // the minimum we are willing to sell all the oTokens for. A discount is applied on black-scholes price\\n            uint96(minBidAmount),\\n            // the minimum bidding amount must be 1 * 10 ** -assetDecimals\\n            1,\\n            // the min funding threshold\\n            0,\\n            // no atomic closure\\n            false,\\n            // access manager contract\\n            address(0),\\n            // bytes for storing info like a whitelist for who can bid\\n            bytes(\\\"\\\")\\n        );\\n\\n        emit InitiateGnosisAuction(\\n            auctionDetails.oTokenAddress,\\n            auctionDetails.asset,\\n            auctionID,\\n            msg.sender\\n        );\\n    }\\n\\n    function placeBid(BidDetails calldata bidDetails)\\n        internal\\n        returns (\\n            uint256 sellAmount,\\n            uint256 buyAmount,\\n            uint64 userId\\n        )\\n    {\\n        // calculate how much to allocate\\n        sellAmount = bidDetails\\n            .lockedBalance\\n            .mul(bidDetails.optionAllocation)\\n            .div(100 * Vault.OPTION_ALLOCATION_MULTIPLIER);\\n\\n        // divide the `asset` sellAmount by the target premium per oToken to\\n        // get the number of oTokens to buy (8 decimals)\\n        buyAmount = sellAmount\\n            .mul(10**(bidDetails.assetDecimals.add(Vault.OTOKEN_DECIMALS)))\\n            .div(bidDetails.optionPremium)\\n            .div(10**bidDetails.assetDecimals);\\n\\n        require(\\n            sellAmount <= type(uint96).max,\\n            \\\"sellAmount > type(uint96) max value!\\\"\\n        );\\n        require(\\n            buyAmount <= type(uint96).max,\\n            \\\"buyAmount > type(uint96) max value!\\\"\\n        );\\n\\n        // approve that amount\\n        IERC20(bidDetails.asset).safeApprove(\\n            bidDetails.gnosisEasyAuction,\\n            sellAmount\\n        );\\n\\n        uint96[] memory _minBuyAmounts = new uint96[](1);\\n        uint96[] memory _sellAmounts = new uint96[](1);\\n        bytes32[] memory _prevSellOrders = new bytes32[](1);\\n        _minBuyAmounts[0] = uint96(buyAmount);\\n        _sellAmounts[0] = uint96(sellAmount);\\n        _prevSellOrders[\\n            0\\n        ] = 0x0000000000000000000000000000000000000000000000000000000000000001;\\n\\n        // place sell order with that amount\\n        userId = IGnosisAuction(bidDetails.gnosisEasyAuction).placeSellOrders(\\n            bidDetails.auctionId,\\n            _minBuyAmounts,\\n            _sellAmounts,\\n            _prevSellOrders,\\n            \\\"0x\\\"\\n        );\\n\\n        emit PlaceAuctionBid(\\n            bidDetails.auctionId,\\n            bidDetails.oTokenAddress,\\n            sellAmount,\\n            buyAmount,\\n            bidDetails.bidder\\n        );\\n\\n        return (sellAmount, buyAmount, userId);\\n    }\\n\\n    function claimAuctionOtokens(\\n        Vault.AuctionSellOrder calldata auctionSellOrder,\\n        address gnosisEasyAuction,\\n        address counterpartyThetaVault\\n    ) internal {\\n        bytes32 order =\\n            encodeOrder(\\n                auctionSellOrder.userId,\\n                auctionSellOrder.buyAmount,\\n                auctionSellOrder.sellAmount\\n            );\\n        bytes32[] memory orders = new bytes32[](1);\\n        orders[0] = order;\\n        IGnosisAuction(gnosisEasyAuction).claimFromParticipantOrder(\\n            IRibbonThetaVault(counterpartyThetaVault).optionAuctionID(),\\n            orders\\n        );\\n    }\\n\\n    function getOTokenSellAmount(address oTokenAddress)\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        // We take our current oToken balance. That will be our sell amount\\n        // but otokens will be transferred to gnosis.\\n        uint256 oTokenSellAmount =\\n            IERC20(oTokenAddress).balanceOf(address(this));\\n\\n        require(\\n            oTokenSellAmount <= type(uint96).max,\\n            \\\"oTokenSellAmount > type(uint96) max value!\\\"\\n        );\\n\\n        return oTokenSellAmount;\\n    }\\n\\n    function getOTokenPremiumInStables(\\n        address oTokenAddress,\\n        address optionsPremiumPricer,\\n        uint256 premiumDiscount\\n    ) internal view returns (uint256) {\\n        IOtoken newOToken = IOtoken(oTokenAddress);\\n        IOptionsPremiumPricer premiumPricer =\\n            IOptionsPremiumPricer(optionsPremiumPricer);\\n\\n        // Apply black-scholes formula (from rvol library) to option given its features\\n        // and get price for 100 contracts denominated USDC for both call and put options\\n        uint256 optionPremium =\\n            premiumPricer.getPremiumInStables(\\n                newOToken.strikePrice(),\\n                newOToken.expiryTimestamp(),\\n                newOToken.isPut()\\n            );\\n\\n        // Apply a discount to incentivize arbitraguers\\n        optionPremium = optionPremium.mul(premiumDiscount).div(\\n            100 * Vault.PREMIUM_DISCOUNT_MULTIPLIER\\n        );\\n\\n        require(\\n            optionPremium <= type(uint96).max,\\n            \\\"optionPremium > type(uint96) max value!\\\"\\n        );\\n\\n        return optionPremium;\\n    }\\n\\n    function encodeOrder(\\n        uint64 userId,\\n        uint96 buyAmount,\\n        uint96 sellAmount\\n    ) internal pure returns (bytes32) {\\n        return\\n            bytes32(\\n                (uint256(userId) << 192) +\\n                    (uint256(buyAmount) << 96) +\\n                    uint256(sellAmount)\\n            );\\n    }\\n}\\n\",\"keccak256\":\"0xfbe9e9b0da571d9b83545d3ae71827da0f91bd1c68c6b68955907e6e967e4972\",\"license\":\"MIT\"},\"contracts/libraries/ShareMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {SafeMath} from \\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\n\\nlibrary ShareMath {\\n    using SafeMath for uint256;\\n\\n    uint256 internal constant PLACEHOLDER_UINT = 1;\\n\\n    function assetToShares(\\n        uint256 assetAmount,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        // If this throws, it means that vault's roundPricePerShare[currentRound] has not been set yet\\n        // which should never happen.\\n        // Has to be larger than 1 because `1` is used in `initRoundPricePerShares` to prevent cold writes.\\n        require(assetPerShare > PLACEHOLDER_UINT, \\\"Invalid assetPerShare\\\");\\n\\n        return assetAmount.mul(10**decimals).div(assetPerShare);\\n    }\\n\\n    function sharesToAsset(\\n        uint256 shares,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        // If this throws, it means that vault's roundPricePerShare[currentRound] has not been set yet\\n        // which should never happen.\\n        // Has to be larger than 1 because `1` is used in `initRoundPricePerShares` to prevent cold writes.\\n        require(assetPerShare > PLACEHOLDER_UINT, \\\"Invalid assetPerShare\\\");\\n\\n        return shares.mul(assetPerShare).div(10**decimals);\\n    }\\n\\n    /**\\n     * @notice Returns the shares unredeemed by the user given their DepositReceipt\\n     * @param depositReceipt is the user's deposit receipt\\n     * @param currentRound is the `round` stored on the vault\\n     * @param assetPerShare is the price in asset per share\\n     * @param decimals is the number of decimals the asset/shares use\\n     * @return unredeemedShares is the user's virtual balance of shares that are owed\\n     */\\n    function getSharesFromReceipt(\\n        Vault.DepositReceipt memory depositReceipt,\\n        uint256 currentRound,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256 unredeemedShares) {\\n        if (depositReceipt.round > 0 && depositReceipt.round < currentRound) {\\n            uint256 sharesFromRound =\\n                assetToShares(depositReceipt.amount, assetPerShare, decimals);\\n\\n            return\\n                uint256(depositReceipt.unredeemedShares).add(sharesFromRound);\\n        }\\n        return depositReceipt.unredeemedShares;\\n    }\\n\\n    function pricePerShare(\\n        uint256 totalSupply,\\n        uint256 totalBalance,\\n        uint256 pendingAmount,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        uint256 singleShare = 10**decimals;\\n        return\\n            totalSupply > 0\\n                ? singleShare.mul(totalBalance.sub(pendingAmount)).div(\\n                    totalSupply\\n                )\\n                : singleShare;\\n    }\\n\\n    /************************************************\\n     *  HELPERS\\n     ***********************************************/\\n\\n    function assertUint104(uint256 num) internal pure {\\n        require(num <= type(uint104).max, \\\"Overflow uint104\\\");\\n    }\\n\\n    function assertUint128(uint256 num) internal pure {\\n        require(num <= type(uint128).max, \\\"Overflow uint128\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x90bc4b56ee48f314d1e326903bdb2926bed143fa4e6867a7d44975503106bf56\",\"license\":\"MIT\"},\"contracts/libraries/SupportsNonCompliantERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {\\n    SafeERC20\\n} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\n\\n/**\\n * This library supports ERC20s that have quirks in their behavior.\\n * One such ERC20 is USDT, which requires allowance to be 0 before calling approve.\\n * We plan to update this library with ERC20s that display such idiosyncratic behavior.\\n */\\nlibrary SupportsNonCompliantERC20 {\\n    address private constant USDT = 0xdAC17F958D2ee523a2206206994597C13D831ec7;\\n\\n    function safeApproveNonCompliant(\\n        IERC20 token,\\n        address spender,\\n        uint256 amount\\n    ) internal {\\n        if (address(token) == USDT) {\\n            SafeERC20.safeApprove(token, spender, 0);\\n        }\\n        SafeERC20.safeApprove(token, spender, amount);\\n    }\\n}\\n\",\"keccak256\":\"0xda967c8a0bcbdf15b1b60c4cba1d0b12aae75431570dfbb5fb06b64162c83cb0\",\"license\":\"MIT\"},\"contracts/libraries/Vault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nlibrary Vault {\\n    /************************************************\\n     *  IMMUTABLES & CONSTANTS\\n     ***********************************************/\\n\\n    // Fees are 6-decimal places. For example: 20 * 10**6 = 20%\\n    uint256 internal constant FEE_MULTIPLIER = 10**6;\\n\\n    // Premium discount has 1-decimal place. For example: 80 * 10**1 = 80%. Which represents a 20% discount.\\n    uint256 internal constant PREMIUM_DISCOUNT_MULTIPLIER = 10;\\n\\n    // Otokens have 8 decimal places.\\n    uint256 internal constant OTOKEN_DECIMALS = 8;\\n\\n    // Percentage of funds allocated to options is 2 decimal places. 10 * 10**2 = 10%\\n    uint256 internal constant OPTION_ALLOCATION_MULTIPLIER = 10**2;\\n\\n    // Placeholder uint value to prevent cold writes\\n    uint256 internal constant PLACEHOLDER_UINT = 1;\\n\\n    struct VaultParams {\\n        // Option type the vault is selling\\n        bool isPut;\\n        // Token decimals for vault shares\\n        uint8 decimals;\\n        // Asset used in Theta / Delta Vault\\n        address asset;\\n        // Underlying asset of the options sold by vault\\n        address underlying;\\n        // Minimum supply of the vault shares issued, for ETH it's 10**10\\n        uint56 minimumSupply;\\n        // Vault cap\\n        uint104 cap;\\n    }\\n\\n    struct OptionState {\\n        // Option that the vault is shorting / longing in the next cycle\\n        address nextOption;\\n        // Option that the vault is currently shorting / longing\\n        address currentOption;\\n        // The timestamp when the `nextOption` can be used by the vault\\n        uint32 nextOptionReadyAt;\\n    }\\n\\n    struct VaultState {\\n        // 32 byte slot 1\\n        //  Current round number. `round` represents the number of `period`s elapsed.\\n        uint16 round;\\n        // Amount that is currently locked for selling options\\n        uint104 lockedAmount;\\n        // Amount that was locked for selling options in the previous round\\n        // used for calculating performance fee deduction\\n        uint104 lastLockedAmount;\\n        // 32 byte slot 2\\n        // Stores the total tally of how much of `asset` there is\\n        // to be used to mint rTHETA tokens\\n        uint128 totalPending;\\n        // Amount locked for scheduled withdrawals;\\n        uint128 queuedWithdrawShares;\\n    }\\n\\n    struct DepositReceipt {\\n        // Maximum of 65535 rounds. Assuming 1 round is 7 days, maximum is 1256 years.\\n        uint16 round;\\n        // Deposit amount, max 20,282,409,603,651 or 20 trillion ETH deposit\\n        uint104 amount;\\n        // Unredeemed shares balance\\n        uint128 unredeemedShares;\\n    }\\n\\n    struct Withdrawal {\\n        // Maximum of 65535 rounds. Assuming 1 round is 7 days, maximum is 1256 years.\\n        uint16 round;\\n        // Number of shares withdrawn\\n        uint128 shares;\\n    }\\n\\n    struct AuctionSellOrder {\\n        // Amount of `asset` token offered in auction\\n        uint96 sellAmount;\\n        // Amount of oToken requested in auction\\n        uint96 buyAmount;\\n        // User Id of delta vault in latest gnosis auction\\n        uint64 userId;\\n    }\\n}\\n\",\"keccak256\":\"0x462aa30f83c322d3129ded8da0d5f8430425a04c8c2d87787f33d7d5c41c1571\",\"license\":\"MIT\"},\"contracts/libraries/VaultLifecycleTreasury.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.4;\\n\\nimport {SafeMath} from \\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\\";\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\nimport {ShareMath} from \\\"./ShareMath.sol\\\";\\nimport {IStrikeSelection} from \\\"../interfaces/IRibbon.sol\\\";\\nimport {GnosisAuction} from \\\"./GnosisAuction.sol\\\";\\nimport {DateTime} from \\\"./DateTime.sol\\\";\\nimport {\\n    IOtokenFactory,\\n    IOtoken,\\n    IController,\\n    GammaTypes\\n} from \\\"../interfaces/GammaInterface.sol\\\";\\nimport {IERC20Detailed} from \\\"../interfaces/IERC20Detailed.sol\\\";\\nimport {IGnosisAuction} from \\\"../interfaces/IGnosisAuction.sol\\\";\\nimport {SupportsNonCompliantERC20} from \\\"./SupportsNonCompliantERC20.sol\\\";\\n\\nlibrary VaultLifecycleTreasury {\\n    using SafeMath for uint256;\\n    using SupportsNonCompliantERC20 for IERC20;\\n\\n    struct CloseParams {\\n        address OTOKEN_FACTORY;\\n        address USDC;\\n        address currentOption;\\n        uint256 delay;\\n        uint16 lastStrikeOverrideRound;\\n        uint256 overriddenStrikePrice;\\n        uint256 period;\\n    }\\n\\n    /**\\n     * @notice Initialization parameters for the vault.\\n     * @param _owner is the owner of the vault with critical permissions\\n     * @param _feeRecipient is the address to recieve vault performance and management fees\\n     * @param _managementFee is the management fee pct.\\n     * @param _performanceFee is the perfomance fee pct.\\n     * @param _tokenName is the name of the token\\n     * @param _tokenSymbol is the symbol of the token\\n     * @param _optionsPremiumPricer is the address of the contract with the\\n       black-scholes premium calculation logic\\n     * @param _strikeSelection is the address of the contract with strike selection logic\\n     * @param _premiumDiscount is the vault's discount applied to the premium\\n     * @param _auctionDuration is the duration of the gnosis auction\\n     * @param _period is the period between each option sales\\n     */\\n    struct InitParams {\\n        address _owner;\\n        address _keeper;\\n        address _feeRecipient;\\n        uint256 _managementFee;\\n        uint256 _performanceFee;\\n        string _tokenName;\\n        string _tokenSymbol;\\n        address _optionsPremiumPricer;\\n        address _strikeSelection;\\n        uint32 _premiumDiscount;\\n        uint256 _auctionDuration;\\n        uint256 _period;\\n        uint256 _maxDepositors;\\n        uint256 _minDeposit;\\n    }\\n\\n    /**\\n     * @notice Sets the next option the vault will be shorting, and calculates its premium for the auction\\n     * @param strikeSelection is the address of the contract with strike selection logic\\n     * @param optionsPremiumPricer is the address of the contract with the\\n       black-scholes premium calculation logic\\n     * @param premiumDiscount is the vault's discount applied to the premium\\n     * @param closeParams is the struct with details on previous option and strike selection details\\n     * @param vaultParams is the struct with vault general data\\n     * @param vaultState is the struct with vault accounting state\\n     * @return otokenAddress is the address of the new option\\n     * @return premium is the premium of the new option\\n     * @return strikePrice is the strike price of the new option\\n     * @return delta is the delta of the new option\\n     */\\n    function commitAndClose(\\n        address strikeSelection,\\n        address optionsPremiumPricer,\\n        uint256 premiumDiscount,\\n        CloseParams calldata closeParams,\\n        Vault.VaultParams storage vaultParams,\\n        Vault.VaultState storage vaultState\\n    )\\n        external\\n        returns (\\n            address otokenAddress,\\n            uint256 premium,\\n            uint256 strikePrice,\\n            uint256 delta\\n        )\\n    {\\n        uint256 expiry;\\n\\n        // uninitialized state\\n        if (closeParams.currentOption == address(0)) {\\n            expiry = getNextExpiry(block.timestamp, closeParams.period);\\n        } else {\\n            expiry = getNextExpiry(\\n                IOtoken(closeParams.currentOption).expiryTimestamp(),\\n                closeParams.period\\n            );\\n        }\\n\\n        IStrikeSelection selection = IStrikeSelection(strikeSelection);\\n\\n        bool isPut = vaultParams.isPut;\\n        address underlying = vaultParams.underlying;\\n        address asset = vaultParams.asset;\\n\\n        (strikePrice, delta) = closeParams.lastStrikeOverrideRound ==\\n            vaultState.round\\n            ? (closeParams.overriddenStrikePrice, 0)\\n            : selection.getStrikePrice(expiry, isPut);\\n\\n        require(strikePrice != 0, \\\"!strikePrice\\\");\\n\\n        // retrieve address if option already exists, or deploy it\\n        otokenAddress = getOrDeployOtoken(\\n            closeParams,\\n            vaultParams,\\n            underlying,\\n            asset,\\n            strikePrice,\\n            expiry,\\n            isPut\\n        );\\n\\n        // get the black scholes premium of the option\\n        premium = GnosisAuction.getOTokenPremiumInStables(\\n            otokenAddress,\\n            optionsPremiumPricer,\\n            premiumDiscount\\n        );\\n\\n        require(premium > 0, \\\"!premium\\\");\\n\\n        return (otokenAddress, premium, strikePrice, delta);\\n    }\\n\\n    /**\\n     * @notice Verify the otoken has the correct parameters to prevent vulnerability to opyn contract changes\\n     * @param otokenAddress is the address of the otoken\\n     * @param vaultParams is the struct with vault general data\\n     * @param collateralAsset is the address of the collateral asset\\n     * @param USDC is the address of usdc\\n     * @param delay is the delay between commitAndClose and rollToNextOption\\n     */\\n    function verifyOtoken(\\n        address otokenAddress,\\n        Vault.VaultParams storage vaultParams,\\n        address collateralAsset,\\n        address USDC,\\n        uint256 delay\\n    ) private view {\\n        require(otokenAddress != address(0), \\\"!otokenAddress\\\");\\n\\n        IOtoken otoken = IOtoken(otokenAddress);\\n        require(otoken.isPut() == vaultParams.isPut, \\\"Type mismatch\\\");\\n        require(\\n            otoken.underlyingAsset() == vaultParams.underlying,\\n            \\\"Wrong underlyingAsset\\\"\\n        );\\n        require(\\n            otoken.collateralAsset() == collateralAsset,\\n            \\\"Wrong collateralAsset\\\"\\n        );\\n\\n        // we just assume all options use USDC as the strike\\n        require(otoken.strikeAsset() == USDC, \\\"strikeAsset != USDC\\\");\\n\\n        uint256 readyAt = block.timestamp.add(delay);\\n        require(otoken.expiryTimestamp() >= readyAt, \\\"Expiry before delay\\\");\\n    }\\n\\n    /**\\n     * @param currentShareSupply is the supply of the shares invoked with totalSupply()\\n     * @param asset is the address of the vault's asset\\n     * @param decimals is the decimals of the asset\\n     * @param lastQueuedWithdrawAmount is the amount queued for withdrawals from last round\\n     * @param managementFee is the management fee percent to charge on the AUM\\n     */\\n    struct RolloverParams {\\n        uint256 decimals;\\n        uint256 totalBalance;\\n        uint256 currentShareSupply;\\n        uint256 lastQueuedWithdrawAmount;\\n        uint256 managementFee;\\n    }\\n\\n    /**\\n     * @notice Calculate the shares to mint, new price per share, and\\n      amount of funds to re-allocate as collateral for the new round\\n     * @param vaultState is the storage variable vaultState passed from RibbonVault\\n     * @param params is the rollover parameters passed to compute the next state\\n     * @return newLockedAmount is the amount of funds to allocate for the new round\\n     * @return queuedWithdrawAmount is the amount of funds set aside for withdrawal\\n     * @return newPricePerShare is the price per share of the new round\\n     * @return mintShares is the amount of shares to mint from deposits\\n     * @return managementFeeInAsset is the amount of management fee charged by vault\\n     */\\n    function rollover(\\n        Vault.VaultState storage vaultState,\\n        RolloverParams calldata params\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 newLockedAmount,\\n            uint256 queuedWithdrawAmount,\\n            uint256 newPricePerShare,\\n            uint256 mintShares,\\n            uint256 managementFeeInAsset\\n        )\\n    {\\n        uint256 currentBalance = params.totalBalance;\\n        uint256 pendingAmount = vaultState.totalPending;\\n        uint256 queuedWithdrawShares = vaultState.queuedWithdrawShares;\\n\\n        uint256 balanceForVaultFees;\\n        {\\n            uint256 pricePerShareBeforeFee =\\n                ShareMath.pricePerShare(\\n                    params.currentShareSupply,\\n                    currentBalance,\\n                    pendingAmount,\\n                    params.decimals\\n                );\\n\\n            uint256 queuedWithdrawBeforeFee =\\n                params.currentShareSupply > 0\\n                    ? ShareMath.sharesToAsset(\\n                        queuedWithdrawShares,\\n                        pricePerShareBeforeFee,\\n                        params.decimals\\n                    )\\n                    : 0;\\n\\n            // Deduct the difference between the newly scheduled withdrawals\\n            // and the older withdrawals\\n            // so we can charge them fees before they leave\\n            uint256 withdrawAmountDiff =\\n                queuedWithdrawBeforeFee > params.lastQueuedWithdrawAmount\\n                    ? queuedWithdrawBeforeFee.sub(\\n                        params.lastQueuedWithdrawAmount\\n                    )\\n                    : 0;\\n\\n            balanceForVaultFees = currentBalance\\n                .sub(queuedWithdrawBeforeFee)\\n                .add(withdrawAmountDiff);\\n        }\\n\\n        managementFeeInAsset = getManagementFee(\\n            balanceForVaultFees,\\n            vaultState.totalPending,\\n            params.managementFee\\n        );\\n\\n        // Take into account the fee\\n        // so we can calculate the newPricePerShare\\n        currentBalance = currentBalance.sub(managementFeeInAsset);\\n\\n        {\\n            newPricePerShare = ShareMath.pricePerShare(\\n                params.currentShareSupply,\\n                currentBalance,\\n                pendingAmount,\\n                params.decimals\\n            );\\n\\n            // After closing the short, if the options expire in-the-money\\n            // vault pricePerShare would go down because vault's asset balance decreased.\\n            // This ensures that the newly-minted shares do not take on the loss.\\n            mintShares = ShareMath.assetToShares(\\n                pendingAmount,\\n                newPricePerShare,\\n                params.decimals\\n            );\\n\\n            uint256 newSupply = params.currentShareSupply.add(mintShares);\\n\\n            queuedWithdrawAmount = newSupply > 0\\n                ? ShareMath.sharesToAsset(\\n                    queuedWithdrawShares,\\n                    newPricePerShare,\\n                    params.decimals\\n                )\\n                : 0;\\n        }\\n\\n        return (\\n            currentBalance.sub(queuedWithdrawAmount), // new locked balance subtracts the queued withdrawals\\n            queuedWithdrawAmount,\\n            newPricePerShare,\\n            mintShares,\\n            managementFeeInAsset\\n        );\\n    }\\n\\n    /**\\n     * @notice Creates the actual Opyn short position by depositing collateral and minting otokens\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param marginPool is the address of the opyn margin contract which holds the collateral\\n     * @param oTokenAddress is the address of the otoken to mint\\n     * @param depositAmount is the amount of collateral to deposit\\n     * @return the otoken mint amount\\n     */\\n    function createShort(\\n        address gammaController,\\n        address marginPool,\\n        address oTokenAddress,\\n        uint256 depositAmount\\n    ) external returns (uint256) {\\n        IController controller = IController(gammaController);\\n        uint256 newVaultID =\\n            (controller.getAccountVaultCounter(address(this))).add(1);\\n\\n        // An otoken's collateralAsset is the vault's `asset`\\n        // So in the context of performing Opyn short operations we call them collateralAsset\\n        IOtoken oToken = IOtoken(oTokenAddress);\\n        address collateralAsset = oToken.collateralAsset();\\n\\n        uint256 collateralDecimals =\\n            uint256(IERC20Detailed(collateralAsset).decimals());\\n        uint256 mintAmount;\\n\\n        if (oToken.isPut()) {\\n            // For minting puts, there will be instances where the full depositAmount will not be used for minting.\\n            // This is because of an issue with precision.\\n            //\\n            // For ETH put options, we are calculating the mintAmount (10**8 decimals) using\\n            // the depositAmount (10**18 decimals), which will result in truncation of decimals when scaling down.\\n            // As a result, there will be tiny amounts of dust left behind in the Opyn vault when minting put otokens.\\n            //\\n            // For simplicity's sake, we do not refund the dust back to the address(this) on minting otokens.\\n            // We retain the dust in the vault so the calling contract can withdraw the\\n            // actual locked amount + dust at settlement.\\n            //\\n            // To test this behavior, we can console.log\\n            // MarginCalculatorInterface(0x7A48d10f372b3D7c60f6c9770B91398e4ccfd3C7).getExcessCollateral(vault)\\n            // to see how much dust (or excess collateral) is left behind.\\n            mintAmount = depositAmount\\n                .mul(10**Vault.OTOKEN_DECIMALS)\\n                .mul(10**18) // we use 10**18 to give extra precision\\n                .div(oToken.strikePrice().mul(10**(10 + collateralDecimals)));\\n        } else {\\n            mintAmount = depositAmount;\\n\\n            if (collateralDecimals > 8) {\\n                uint256 scaleBy = 10**(collateralDecimals.sub(8)); // oTokens have 8 decimals\\n                if (mintAmount > scaleBy) {\\n                    mintAmount = depositAmount.div(scaleBy); // scale down from 10**18 to 10**8\\n                }\\n            }\\n        }\\n\\n        // double approve to fix non-compliant ERC20s\\n        IERC20 collateralToken = IERC20(collateralAsset);\\n        collateralToken.safeApproveNonCompliant(marginPool, depositAmount);\\n\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](3);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.OpenVault,\\n            address(this), // owner\\n            address(this), // receiver\\n            address(0), // asset, otoken\\n            newVaultID, // vaultId\\n            0, // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        actions[1] = IController.ActionArgs(\\n            IController.ActionType.DepositCollateral,\\n            address(this), // owner\\n            address(this), // address to transfer from\\n            collateralAsset, // deposited asset\\n            newVaultID, // vaultId\\n            depositAmount, // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        actions[2] = IController.ActionArgs(\\n            IController.ActionType.MintShortOption,\\n            address(this), // owner\\n            address(this), // address to transfer to\\n            oTokenAddress, // option address\\n            newVaultID, // vaultId\\n            mintAmount, // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        controller.operate(actions);\\n\\n        return mintAmount;\\n    }\\n\\n    /**\\n     * @notice Close the existing short otoken position. Currently this implementation is simple.\\n     * It closes the most recent vault opened by the contract. This assumes that the contract will\\n     * only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by\\n     calling SettleVault action, this assumption should hold.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @return amount of collateral redeemed from the vault\\n     */\\n    function settleShort(address gammaController) external returns (uint256) {\\n        IController controller = IController(gammaController);\\n\\n        // gets the currently active vault ID\\n        uint256 vaultID = controller.getAccountVaultCounter(address(this));\\n\\n        GammaTypes.Vault memory vault =\\n            controller.getVault(address(this), vaultID);\\n\\n        require(vault.shortOtokens.length > 0, \\\"No short\\\");\\n\\n        // An otoken's collateralAsset is the vault's `asset`\\n        // So in the context of performing Opyn short operations we call them collateralAsset\\n        IERC20 collateralToken = IERC20(vault.collateralAssets[0]);\\n\\n        // The short position has been previously closed, or all the otokens have been burned.\\n        // So we return early.\\n        if (address(collateralToken) == address(0)) {\\n            return 0;\\n        }\\n\\n        // This is equivalent to doing IERC20(vault.asset).balanceOf(address(this))\\n        uint256 startCollateralBalance =\\n            collateralToken.balanceOf(address(this));\\n\\n        // If it is after expiry, we need to settle the short position using the normal way\\n        // Delete the vault and withdraw all remaining collateral from the vault\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](1);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.SettleVault,\\n            address(this), // owner\\n            address(this), // address to transfer to\\n            address(0), // not used\\n            vaultID, // vaultId\\n            0, // not used\\n            0, // not used\\n            \\\"\\\" // not used\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endCollateralBalance = collateralToken.balanceOf(address(this));\\n\\n        return endCollateralBalance.sub(startCollateralBalance);\\n    }\\n\\n    /**\\n     * @notice Exercises the ITM option using existing long otoken position. Currently this implementation is simple.\\n     * It calls the `Redeem` action to claim the payout.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param oldOption is the address of the old option\\n     * @param asset is the address of the vault's asset\\n     * @return amount of asset received by exercising the option\\n     */\\n    function settleLong(\\n        address gammaController,\\n        address oldOption,\\n        address asset\\n    ) external returns (uint256) {\\n        IController controller = IController(gammaController);\\n\\n        uint256 oldOptionBalance = IERC20(oldOption).balanceOf(address(this));\\n\\n        if (controller.getPayout(oldOption, oldOptionBalance) == 0) {\\n            return 0;\\n        }\\n\\n        uint256 startAssetBalance = IERC20(asset).balanceOf(address(this));\\n\\n        // If it is after expiry, we need to redeem the profits\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](1);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.Redeem,\\n            address(0), // not used\\n            address(this), // address to send profits to\\n            oldOption, // address of otoken\\n            0, // not used\\n            oldOptionBalance, // otoken balance\\n            0, // not used\\n            \\\"\\\" // not used\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endAssetBalance = IERC20(asset).balanceOf(address(this));\\n\\n        return endAssetBalance.sub(startAssetBalance);\\n    }\\n\\n    /**\\n     * @notice Burn the remaining oTokens left over from auction. Currently this implementation is simple.\\n     * It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will\\n     * only have a single vault open at any given time.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param currentOption is the address of the current option\\n     * @return amount of collateral redeemed by burning otokens\\n     */\\n    function burnOtokens(address gammaController, address currentOption)\\n        external\\n        returns (uint256)\\n    {\\n        uint256 numOTokensToBurn =\\n            IERC20(currentOption).balanceOf(address(this));\\n\\n        require(numOTokensToBurn > 0, \\\"No oTokens to burn\\\");\\n\\n        IController controller = IController(gammaController);\\n\\n        // gets the currently active vault ID\\n        uint256 vaultID = controller.getAccountVaultCounter(address(this));\\n\\n        GammaTypes.Vault memory vault =\\n            controller.getVault(address(this), vaultID);\\n\\n        require(vault.shortOtokens.length > 0, \\\"No short\\\");\\n\\n        IERC20 collateralToken = IERC20(vault.collateralAssets[0]);\\n\\n        uint256 startCollateralBalance =\\n            collateralToken.balanceOf(address(this));\\n\\n        // Burning `amount` of oTokens from the ribbon vault,\\n        // then withdrawing the corresponding collateral amount from the vault\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](2);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.BurnShortOption,\\n            address(this), // owner\\n            address(this), // address to transfer from\\n            address(vault.shortOtokens[0]), // otoken address\\n            vaultID, // vaultId\\n            numOTokensToBurn, // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        actions[1] = IController.ActionArgs(\\n            IController.ActionType.WithdrawCollateral,\\n            address(this), // owner\\n            address(this), // address to transfer to\\n            address(collateralToken), // withdrawn asset\\n            vaultID, // vaultId\\n            vault.collateralAmounts[0].mul(numOTokensToBurn).div(\\n                vault.shortAmounts[0]\\n            ), // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endCollateralBalance = collateralToken.balanceOf(address(this));\\n\\n        return endCollateralBalance.sub(startCollateralBalance);\\n    }\\n\\n    /**\\n     * @notice Calculates the management fee for this week's round\\n     * @param currentBalance is the balance of funds held on the vault after closing short\\n     * @param pendingAmount is the pending deposit amount\\n     * @param managementFeePercent is the management fee pct.\\n     * @return managementFeeInAsset is the management fee\\n     */\\n    function getManagementFee(\\n        uint256 currentBalance,\\n        uint256 pendingAmount,\\n        uint256 managementFeePercent\\n    ) internal pure returns (uint256 managementFeeInAsset) {\\n        // At the first round, currentBalance=0, pendingAmount>0\\n        // so we just do not charge anything on the first round\\n        uint256 lockedBalanceSansPending =\\n            currentBalance > pendingAmount\\n                ? currentBalance.sub(pendingAmount)\\n                : 0;\\n\\n        uint256 _managementFeeInAsset;\\n\\n        // Always charge management fee regardless of whether the vault is\\n        // making a profit from the previous options sale\\n        _managementFeeInAsset = managementFeePercent > 0\\n            ? lockedBalanceSansPending.mul(managementFeePercent).div(\\n                100 * Vault.FEE_MULTIPLIER\\n            )\\n            : 0;\\n\\n        return _managementFeeInAsset;\\n    }\\n\\n    /**\\n     * @notice Either retrieves the option token if it already exists, or deploy it\\n     * @param closeParams is the struct with details on previous option and strike selection details\\n     * @param vaultParams is the struct with vault general data\\n     * @param underlying is the address of the underlying asset of the option\\n     * @param collateralAsset is the address of the collateral asset of the option\\n     * @param strikePrice is the strike price of the option\\n     * @param expiry is the expiry timestamp of the option\\n     * @param isPut is whether the option is a put\\n     * @return the address of the option\\n     */\\n    function getOrDeployOtoken(\\n        CloseParams calldata closeParams,\\n        Vault.VaultParams storage vaultParams,\\n        address underlying,\\n        address collateralAsset,\\n        uint256 strikePrice,\\n        uint256 expiry,\\n        bool isPut\\n    ) internal returns (address) {\\n        IOtokenFactory factory = IOtokenFactory(closeParams.OTOKEN_FACTORY);\\n\\n        address otokenFromFactory =\\n            factory.getOtoken(\\n                underlying,\\n                closeParams.USDC,\\n                collateralAsset,\\n                strikePrice,\\n                expiry,\\n                isPut\\n            );\\n\\n        if (otokenFromFactory != address(0)) {\\n            return otokenFromFactory;\\n        }\\n\\n        address otoken =\\n            factory.createOtoken(\\n                underlying,\\n                closeParams.USDC,\\n                collateralAsset,\\n                strikePrice,\\n                expiry,\\n                isPut\\n            );\\n\\n        verifyOtoken(\\n            otoken,\\n            vaultParams,\\n            collateralAsset,\\n            closeParams.USDC,\\n            closeParams.delay\\n        );\\n\\n        return otoken;\\n    }\\n\\n    /**\\n     * @notice Starts the gnosis auction\\n     * @param auctionDetails is the struct with all the custom parameters of the auction\\n     * @return the auction id of the newly created auction\\n     */\\n    function startAuction(GnosisAuction.AuctionDetails calldata auctionDetails)\\n        external\\n        returns (uint256)\\n    {\\n        return GnosisAuction.startAuction(auctionDetails);\\n    }\\n\\n    /**\\n     * @notice Settles the gnosis auction\\n     * @param gnosisEasyAuction is the contract address of Gnosis easy auction protocol\\n     * @param auctionID is the auction ID of the gnosis easy auction\\n     */\\n    function settleAuction(address gnosisEasyAuction, uint256 auctionID)\\n        internal\\n    {\\n        IGnosisAuction(gnosisEasyAuction).settleAuction(auctionID);\\n    }\\n\\n    /**\\n     * @notice Places a bid in an auction\\n     * @param bidDetails is the struct with all the details of the\\n      bid including the auction's id and how much to bid\\n     */\\n    function placeBid(GnosisAuction.BidDetails calldata bidDetails)\\n        external\\n        returns (\\n            uint256 sellAmount,\\n            uint256 buyAmount,\\n            uint64 userId\\n        )\\n    {\\n        return GnosisAuction.placeBid(bidDetails);\\n    }\\n\\n    /**\\n     * @notice Claims the oTokens belonging to the vault\\n     * @param auctionSellOrder is the sell order of the bid\\n     * @param gnosisEasyAuction is the address of the gnosis auction contract\\n     holding custody to the funds\\n     * @param counterpartyThetaVault is the address of the counterparty theta\\n     vault of this delta vault\\n     */\\n    function claimAuctionOtokens(\\n        Vault.AuctionSellOrder calldata auctionSellOrder,\\n        address gnosisEasyAuction,\\n        address counterpartyThetaVault\\n    ) external {\\n        GnosisAuction.claimAuctionOtokens(\\n            auctionSellOrder,\\n            gnosisEasyAuction,\\n            counterpartyThetaVault\\n        );\\n    }\\n\\n    /**\\n     * @notice Verify the constructor params satisfy requirements\\n     * @param _initParams is the initialization parameter including owner, keeper, etc.\\n     * @param _vaultParams is the struct with vault general data\\n     */\\n    function verifyInitializerParams(\\n        InitParams calldata _initParams,\\n        Vault.VaultParams calldata _vaultParams,\\n        uint256 _min_auction_duration\\n    ) external pure {\\n        require(_initParams._owner != address(0), \\\"!_owner\\\");\\n        require(_initParams._keeper != address(0), \\\"!_keeper\\\");\\n        require(_initParams._feeRecipient != address(0), \\\"!_feeRecipient\\\");\\n        require(\\n            _initParams._performanceFee < 100 * Vault.FEE_MULTIPLIER,\\n            \\\"performanceFee >= 100%\\\"\\n        );\\n        require(\\n            _initParams._managementFee < 100 * Vault.FEE_MULTIPLIER,\\n            \\\"managementFee >= 100%\\\"\\n        );\\n        require(bytes(_initParams._tokenName).length > 0, \\\"!_tokenName\\\");\\n        require(bytes(_initParams._tokenSymbol).length > 0, \\\"!_tokenSymbol\\\");\\n        require(\\n            (_initParams._period == 7) ||\\n                (_initParams._period == 14) ||\\n                (_initParams._period == 30) ||\\n                (_initParams._period == 90) ||\\n                (_initParams._period == 180),\\n            \\\"!_period\\\"\\n        );\\n        require(\\n            _initParams._optionsPremiumPricer != address(0),\\n            \\\"!_optionsPremiumPricer\\\"\\n        );\\n        require(\\n            _initParams._strikeSelection != address(0),\\n            \\\"!_strikeSelection\\\"\\n        );\\n        require(\\n            _initParams._premiumDiscount > 0 &&\\n                _initParams._premiumDiscount <\\n                100 * Vault.PREMIUM_DISCOUNT_MULTIPLIER,\\n            \\\"!_premiumDiscount\\\"\\n        );\\n        require(\\n            _initParams._auctionDuration >= _min_auction_duration,\\n            \\\"!_auctionDuration\\\"\\n        );\\n        require(_initParams._maxDepositors > 0, \\\"!_maxDepositors\\\");\\n        require(_initParams._minDeposit > 0, \\\"!_minDeposit\\\");\\n\\n        require(_vaultParams.asset != address(0), \\\"!asset\\\");\\n        require(_vaultParams.underlying != address(0), \\\"!underlying\\\");\\n        require(_vaultParams.minimumSupply > 0, \\\"!minimumSupply\\\");\\n        require(_vaultParams.cap > 0, \\\"!cap\\\");\\n        require(\\n            _vaultParams.cap > _vaultParams.minimumSupply,\\n            \\\"cap has to be higher than minimumSupply\\\"\\n        );\\n    }\\n\\n    /**\\n     * @notice Gets the next options expiry timestamp, this function should be called\\n     when there is sufficient guard to ensure valid period\\n     * @param timestamp is the expiry timestamp of the current option\\n     * @param period is no. of days in between option sales. Available periods are: \\n     * 7(1w), 14(2w), 30(1m), 90(3m), 180(6m)\\n     */\\n    function getNextExpiry(uint256 timestamp, uint256 period)\\n        internal\\n        pure\\n        returns (uint256 nextExpiry)\\n    {\\n        if (period == 7) {\\n            nextExpiry = DateTime.getNextFriday(timestamp);\\n            nextExpiry = nextExpiry <= timestamp\\n                ? nextExpiry + 1 weeks\\n                : nextExpiry;\\n        } else if (period == 14) {\\n            nextExpiry = DateTime.getNextFriday(timestamp);\\n            nextExpiry = nextExpiry <= timestamp\\n                ? nextExpiry + 2 weeks\\n                : nextExpiry;\\n        } else if (period == 30) {\\n            nextExpiry = DateTime.getMonthLastFriday(timestamp);\\n            nextExpiry = nextExpiry <= timestamp\\n                ? DateTime.getMonthLastFriday(nextExpiry + 1 weeks)\\n                : nextExpiry;\\n        } else if (period == 90) {\\n            nextExpiry = DateTime.getQuarterLastFriday(timestamp);\\n            nextExpiry = nextExpiry <= timestamp\\n                ? DateTime.getQuarterLastFriday(nextExpiry + 1 weeks)\\n                : nextExpiry;\\n        } else if (period == 180) {\\n            nextExpiry = DateTime.getBiannualLastFriday(timestamp);\\n            nextExpiry = nextExpiry <= timestamp\\n                ? DateTime.getBiannualLastFriday(nextExpiry + 1 weeks)\\n                : nextExpiry;\\n        }\\n\\n        nextExpiry = nextExpiry - (nextExpiry % (24 hours)) + (8 hours);\\n    }\\n}\\n\",\"keccak256\":\"0x15a70022c09e7fab839ab7fce5858813463836371dfc4e36c77ef27daa8f5b37\",\"license\":\"MIT\"},\"contracts/vendor/DSMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\n/// math.sol -- mixin for inline numerical wizardry\\n\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU General Public License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU General Public License for more details.\\n\\n// You should have received a copy of the GNU General Public License\\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n\\npragma solidity >0.4.13;\\n\\nlibrary DSMath {\\n    function add(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require((z = x + y) >= x, \\\"ds-math-add-overflow\\\");\\n    }\\n\\n    function sub(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require((z = x - y) <= x, \\\"ds-math-sub-underflow\\\");\\n    }\\n\\n    function mul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require(y == 0 || (z = x * y) / y == x, \\\"ds-math-mul-overflow\\\");\\n    }\\n\\n    function min(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        return x <= y ? x : y;\\n    }\\n\\n    function max(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        return x >= y ? x : y;\\n    }\\n\\n    function imin(int256 x, int256 y) internal pure returns (int256 z) {\\n        return x <= y ? x : y;\\n    }\\n\\n    function imax(int256 x, int256 y) internal pure returns (int256 z) {\\n        return x >= y ? x : y;\\n    }\\n\\n    uint256 constant WAD = 10**18;\\n    uint256 constant RAY = 10**27;\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function wmul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, y), WAD / 2) / WAD;\\n    }\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function rmul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, y), RAY / 2) / RAY;\\n    }\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function wdiv(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, WAD), y / 2) / y;\\n    }\\n\\n    //rounds to zero if x*y < RAY / 2\\n    function rdiv(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, RAY), y / 2) / y;\\n    }\\n\\n    // This famous algorithm is called \\\"exponentiation by squaring\\\"\\n    // and calculates x^n with x as fixed-point and n as regular unsigned.\\n    //\\n    // It's O(log n), instead of O(n) for naive repeated multiplication.\\n    //\\n    // These facts are why it works:\\n    //\\n    //  If n is even, then x^n = (x^2)^(n/2).\\n    //  If n is odd,  then x^n = x * x^(n-1),\\n    //   and applying the equation for even x gives\\n    //    x^n = x * (x^2)^((n-1) / 2).\\n    //\\n    //  Also, EVM division is flooring and\\n    //    floor[(n-1) / 2] = floor[n / 2].\\n    //\\n    function rpow(uint256 x, uint256 n) internal pure returns (uint256 z) {\\n        z = n % 2 != 0 ? x : RAY;\\n\\n        for (n /= 2; n != 0; n /= 2) {\\n            x = rmul(x, x);\\n\\n            if (n % 2 != 0) {\\n                z = rmul(z, x);\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xe1c6bb5cff7c83c85792349f61b3f4faf6e22bb02fa95d7af7b269e59a3902b2\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x614a2061003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100a85760003560e01c806384d831a91161007057806384d831a9146101a757806395a170d7146101ba578063d8dfd0fe146101ff578063de8e34181461021f578063eebc5ff41461023f57600080fd5b806307cc4239146100ad5780632904c239146100cf57806358ffbb3d146101025780635a90235d14610122578063686fb2f21461016c575b600080fd5b8180156100b957600080fd5b506100cd6100c8366004613fb6565b61025f565b005b8180156100db57600080fd5b506100ef6100ea366004613ebb565b61026f565b6040519081526020015b60405180910390f35b81801561010e57600080fd5b506100ef61011d366004613e39565b6107d9565b81801561012e57600080fd5b5061014261013d366004613f0b565b610d6e565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100f9565b61017f61017a366004614068565b610fb3565b604080519586526020860194909452928401919091526060830152608082015260a0016100f9565b6100cd6101b536600461400c565b6110e5565b8180156101c657600080fd5b506101da6101d5366004613ffa565b6117ae565b60408051938452602084019290925267ffffffffffffffff16908201526060016100f9565b81801561020b57600080fd5b506100ef61021a366004613e01565b6117c9565b81801561022b57600080fd5b506100ef61023a366004613e71565b611b9d565b81801561024b57600080fd5b506100ef61025a366004613f9b565b611ee9565b61026a838383611ef4565b505050565b604051636553690d60e11b8152306004820152600090859082906102fa906001906001600160a01b0385169063caa6d21a9060240160206040518083038186803b1580156102bc57600080fd5b505afa1580156102d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102f491906141ff565b90612077565b905060008590506000816001600160a01b031663aabaecd66040518163ffffffff1660e01b815260040160206040518083038186803b15801561033c57600080fd5b505afa158015610350573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103749190613e1d565b90506000816001600160a01b031663313ce5676040518163ffffffff1660e01b815260040160206040518083038186803b1580156103b157600080fd5b505afa1580156103c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103e991906142bd565b60ff1690506000836001600160a01b031663f3c274a66040518163ffffffff1660e01b815260040160206040518083038186803b15801561042957600080fd5b505afa15801561043d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104619190613f7b565b15610528576105216104f961047784600a6146f9565b61048290600a614796565b866001600160a01b031663c52987cf6040518163ffffffff1660e01b815260040160206040518083038186803b1580156104bb57600080fd5b505afa1580156104cf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104f391906141ff565b90612083565b61051b670de0b6b3a76400006104f36105146008600a614796565b8d90612083565b9061208f565b9050610564565b5086600882111561056457600061054083600861209b565b61054b90600a614796565b9050808211156105625761055f898261208f565b91505b505b826105796001600160a01b0382168c8b6120a7565b60408051600380825260808201909252600091816020015b610599613cb4565b815260200190600190039081610591579050506040805161010081019091529091508060008152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b031681526020018881526020016000815260200160008152602001604051806020016040528060008152508152508160008151811061063957634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060058152602001306001600160a01b03168152602001306001600160a01b03168152602001866001600160a01b031681526020018881526020018b81526020016000815260200160405180602001604052806000815250815250816001815181106106cc57634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060018152602001306001600160a01b03168152602001306001600160a01b031681526020018c6001600160a01b0316815260200188815260200184815260200160008152602001604051806020016040528060008152508152508160028151811061075f57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0389169063b617f0c69061079690849060040161447d565b600060405180830381600087803b1580156107b057600080fd5b505af11580156107c4573d6000803e3d6000fd5b50949f9e505050505050505050505050505050565b6040516370a0823160e01b815230600482015260009081906001600160a01b038416906370a082319060240160206040518083038186803b15801561081d57600080fd5b505afa158015610831573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061085591906141ff565b9050600081116108a15760405162461bcd60e51b815260206004820152601260248201527127379037aa37b5b2b739903a3790313ab93760711b60448201526064015b60405180910390fd5b604051636553690d60e11b815230600482015284906000906001600160a01b0383169063caa6d21a9060240160206040518083038186803b1580156108e557600080fd5b505afa1580156108f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091d91906141ff565b60405163d99d13f560e01b8152306004820152602481018290529091506000906001600160a01b0384169063d99d13f59060440160006040518083038186803b15801561096957600080fd5b505afa15801561097d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109a5919081019061409e565b8051519091506109e25760405162461bcd60e51b8152602060048201526008602482015267139bc81cda1bdc9d60c21b6044820152606401610898565b60008160400151600081518110610a0957634e487b7160e01b600052603260045260246000fd5b60209081029190910101516040516370a0823160e01b81523060048201529091506000906001600160a01b038316906370a082319060240160206040518083038186803b158015610a5957600080fd5b505afa158015610a6d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9191906141ff565b6040805160028082526060820190925291925060009190816020015b610ab5613cb4565b815260200190600190039081610aad5790505060408051610100810190915290915080600281523060208201819052604082015285518051606090920191600090610b1057634e487b7160e01b600052603260045260246000fd5b60200260200101516001600160a01b03168152602001868152602001888152602001600081526020016040518060200160405280600081525081525081600081518110610b6d57634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060068152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b03168152602001868152602001610c2e8660600151600081518110610be757634e487b7160e01b600052603260045260246000fd5b602002602001015161051b8b8960a00151600081518110610c1857634e487b7160e01b600052603260045260246000fd5b602002602001015161208390919063ffffffff16565b8152602001600081526020016040518060200160405280600081525081525081600181518110610c6e57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690610ca590849060040161447d565b600060405180830381600087803b158015610cbf57600080fd5b505af1158015610cd3573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03861691506370a082319060240160206040518083038186803b158015610d1957600080fd5b505afa158015610d2d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5191906141ff565b9050610d5d818461209b565b985050505050505050505b92915050565b60008080808080610d8560608a0160408b01613e01565b6001600160a01b03161415610da957610da2428960c001356120e3565b9050610e39565b610e36610dbc60608a0160408b01613e01565b6001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b158015610df457600080fd5b505afa158015610e08573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e2c91906141ff565b8960c001356120e3565b90505b8654600188015487548d9260ff8116926001600160a01b039081169262010000909204169061ffff16610e7260a08e0160808f016141dd565b61ffff1614610eff5760405163e436b89160e01b81526004810186905283151560248201526001600160a01b0385169063e436b89190604401604080518083038186803b158015610ec257600080fd5b505afa158015610ed6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610efa9190614217565b610f07565b8b60a0013560005b909750955086610f485760405162461bcd60e51b815260206004820152600c60248201526b21737472696b65507269636560a01b6044820152606401610898565b610f578c8c84848b8a89612215565b9850610f64898f8f6123a9565b975060008811610fa15760405162461bcd60e51b8152602060048201526008602482015267217072656d69756d60c01b6044820152606401610898565b50505050509650965096509692505050565b600182015460009081908190819081906020870135906001600160801b0380821691600160801b9004168380610ff060408c013586868e35612624565b90506000808c6040013511611006576000611012565b61101284838e3561265a565b905060008c606001358211611028576000611036565b6110368260608f013561209b565b9050611046816102f4898561209b565b60018f015490945061106b93508492506001600160801b0316905060808d01356126c4565b9450611077848661209b565b935061108a60408b013585858d35612624565b965061109883888c3561270c565b955060006110aa60408c013588612077565b9050600081116110bb5760006110c7565b6110c783898d3561265a565b98506110d59050848961209b565b9850505050509295509295909350565b60006110f46020850185613e01565b6001600160a01b031614156111355760405162461bcd60e51b815260206004820152600760248201526610afb7bbb732b960c91b6044820152606401610898565b60006111476040850160208601613e01565b6001600160a01b031614156111895760405162461bcd60e51b815260206004820152600860248201526710afb5b2b2b832b960c11b6044820152606401610898565b600061119b6060850160408601613e01565b6001600160a01b031614156111e35760405162461bcd60e51b815260206004820152600e60248201526d0857d99959549958da5c1a595b9d60921b6044820152606401610898565b6111f1620f424060646148c1565b83608001351061123c5760405162461bcd60e51b8152602060048201526016602482015275706572666f726d616e6365466565203e3d203130302560501b6044820152606401610898565b61124a620f424060646148c1565b8360600135106112945760405162461bcd60e51b81526020600482015260156024820152746d616e6167656d656e74466565203e3d203130302560581b6044820152606401610898565b60006112a360a08501856145ee565b9050116112e05760405162461bcd60e51b815260206004820152600b60248201526a215f746f6b656e4e616d6560a81b6044820152606401610898565b60006112ef60c08501856145ee565b90501161132e5760405162461bcd60e51b815260206004820152600d60248201526c0857dd1bdad95b94de5b589bdb609a1b6044820152606401610898565b826101600135600714806113475750826101600135600e145b806113575750826101600135601e145b806113675750826101600135605a145b80611377575082610160013560b4145b6113ae5760405162461bcd60e51b81526020600482015260086024820152670857dc195c9a5bd960c21b6044820152606401610898565b60006113c1610100850160e08601613e01565b6001600160a01b031614156114115760405162461bcd60e51b815260206004820152601660248201527510afb7b83a34b7b739a83932b6b4bab6a83934b1b2b960511b6044820152606401610898565b600061142561012085016101008601613e01565b6001600160a01b031614156114705760405162461bcd60e51b815260206004820152601160248201527010afb9ba3934b5b2a9b2b632b1ba34b7b760791b6044820152606401610898565b60006114846101408501610120860161423a565b63ffffffff161180156114b8575061149e600a60646148c1565b6114b06101408501610120860161423a565b63ffffffff16105b6114f85760405162461bcd60e51b81526020600482015260116024820152700857dc1c995b5a5d5b511a5cd8dbdd5b9d607a1b6044820152606401610898565b8083610140013510156115415760405162461bcd60e51b815260206004820152601160248201527010afb0bab1ba34b7b7223ab930ba34b7b760791b6044820152606401610898565b6000836101800135116115885760405162461bcd60e51b815260206004820152600f60248201526e215f6d61784465706f7369746f727360881b6044820152606401610898565b6000836101a00135116115cc5760405162461bcd60e51b815260206004820152600c60248201526b0857db5a5b91195c1bdcda5d60a21b6044820152606401610898565b60006115de6060840160408501613e01565b6001600160a01b0316141561161e5760405162461bcd60e51b815260206004820152600660248201526508585cdcd95d60d21b6044820152606401610898565b60006116306080840160608501613e01565b6001600160a01b031614156116755760405162461bcd60e51b815260206004820152600b60248201526a21756e6465726c79696e6760a81b6044820152606401610898565b600061168760a084016080850161425e565b66ffffffffffffff16116116ce5760405162461bcd60e51b815260206004820152600e60248201526d216d696e696d756d537570706c7960901b6044820152606401610898565b60006116e060c0840160a085016141b6565b6001600160681b03161161171f5760405162461bcd60e51b8152600401610898906020808252600490820152630216361760e41b604082015260600190565b61172f60a083016080840161425e565b66ffffffffffffff1661174860c0840160a085016141b6565b6001600160681b03161161026a5760405162461bcd60e51b815260206004820152602760248201527f6361702068617320746f20626520686967686572207468616e206d696e696d756044820152666d537570706c7960c81b6064820152608401610898565b60008060006117bc8461276f565b9250925092509193909250565b604051636553690d60e11b8152306004820152600090829082906001600160a01b0383169063caa6d21a9060240160206040518083038186803b15801561180f57600080fd5b505afa158015611823573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061184791906141ff565b60405163d99d13f560e01b8152306004820152602481018290529091506000906001600160a01b0384169063d99d13f59060440160006040518083038186803b15801561189357600080fd5b505afa1580156118a7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526118cf919081019061409e565b80515190915061190c5760405162461bcd60e51b8152602060048201526008602482015267139bc81cda1bdc9d60c21b6044820152606401610898565b6000816040015160008151811061193357634e487b7160e01b600052603260045260246000fd5b6020026020010151905060006001600160a01b0316816001600160a01b031614156119645750600095945050505050565b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a082319060240160206040518083038186803b1580156119a657600080fd5b505afa1580156119ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119de91906141ff565b60408051600180825281830190925291925060009190816020015b611a01613cb4565b8152602001906001900390816119f9579050506040805161010081019091529091508060078152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b0316815260200186815260200160008152602001600081526020016040518060200160405280600081525081525081600081518110611aa157634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690611ad890849060040161447d565b600060405180830381600087803b158015611af257600080fd5b505af1158015611b06573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03861691506370a082319060240160206040518083038186803b158015611b4c57600080fd5b505afa158015611b60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b8491906141ff565b9050611b90818461209b565b9998505050505050505050565b6040516370a0823160e01b8152306004820152600090849082906001600160a01b038616906370a082319060240160206040518083038186803b158015611be357600080fd5b505afa158015611bf7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c1b91906141ff565b60405163565eea1960e01b81526001600160a01b038781166004830152602482018390529192509083169063565eea199060440160206040518083038186803b158015611c6757600080fd5b505afa158015611c7b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9f91906141ff565b611cae57600092505050611ee2565b6040516370a0823160e01b81523060048201526000906001600160a01b038616906370a082319060240160206040518083038186803b158015611cf057600080fd5b505afa158015611d04573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d2891906141ff565b60408051600180825281830190925291925060009190816020015b611d4b613cb4565b815260200190600190039081611d4357905050604080516101008101909152909150806008815260200160006001600160a01b03168152602001306001600160a01b03168152602001886001600160a01b0316815260200160008152602001848152602001600081526020016040518060200160405280600081525081525081600081518110611deb57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c690611e2290849060040161447d565b600060405180830381600087803b158015611e3c57600080fd5b505af1158015611e50573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03891691506370a082319060240160206040518083038186803b158015611e9657600080fd5b505afa158015611eaa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ece91906141ff565b9050611eda818461209b565b955050505050505b9392505050565b6000610d6882612b0b565b6000611f2b611f096060860160408701614285565b611f1960408701602088016142de565b611f2660208801886142de565b612e59565b60408051600180825281830190925291925060009190602080830190803683370190505090508181600081518110611f7357634e487b7160e01b600052603260045260246000fd5b602002602001018181525050836001600160a01b0316637882deaf846001600160a01b031663432833a66040518163ffffffff1660e01b815260040160206040518083038186803b158015611fc757600080fd5b505afa158015611fdb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fff91906141ff565b836040518363ffffffff1660e01b815260040161201d92919061456e565b6040805180830381600087803b15801561203657600080fd5b505af115801561204a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061206e9190614217565b50505050505050565b6000611ee282846146f9565b6000611ee282846148c1565b6000611ee2828461473f565b6000611ee2828461491f565b6001600160a01b03831673dac17f958d2ee523a2206206994597c13d831ec714156120d8576120d883836000612e9c565b61026a838383612e9c565b6000816007141561211b576120f783612fe2565b9050828111156121075780612114565b6121148162093a806146f9565b90506121f2565b81600e141561214a5761212d83612fe2565b90508281111561213d5780612114565b61211481621275006146f9565b81601e14156121815761215c8361300a565b90508281111561216c5780612114565b61211461217c8262093a806146f9565b61300a565b81605a14156121b8576121938361303f565b9050828111156121a35780612114565b6121146121b38262093a806146f9565b61303f565b8160b414156121f2576121ca836130b1565b9050828111156121da57806121ef565b6121ef6121ea8262093a806146f9565b6130b1565b90505b6121ff6201518082614966565b612209908261491f565b611ee2906170806146f9565b60008061222560208a018a613e01565b905060006001600160a01b03821663115470548961224960408e0160208f01613e01565b8a8a8a8a6040518763ffffffff1660e01b815260040161226e969594939291906143bf565b60206040518083038186803b15801561228657600080fd5b505afa15801561229a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122be9190613e1d565b90506001600160a01b038116156122d857915061239e9050565b6000826001600160a01b031663c09746308a8d60200160208101906122fd9190613e01565b8b8b8b8b6040518763ffffffff1660e01b8152600401612322969594939291906143bf565b602060405180830381600087803b15801561233c57600080fd5b505af1158015612350573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906123749190613e1d565b9050612399818b8a8e602001602081019061238f9190613e01565b8f606001356130e2565b925050505b979650505050505050565b60008084905060008490506000816001600160a01b03166330a75871846001600160a01b031663c52987cf6040518163ffffffff1660e01b815260040160206040518083038186803b1580156123fe57600080fd5b505afa158015612412573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061243691906141ff565b856001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b15801561246f57600080fd5b505afa158015612483573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124a791906141ff565b866001600160a01b031663f3c274a66040518163ffffffff1660e01b815260040160206040518083038186803b1580156124e057600080fd5b505afa1580156124f4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906125189190613f7b565b6040516001600160e01b031960e086901b168152600481019390935260248301919091521515604482015260640160206040518083038186803b15801561255e57600080fd5b505afa158015612572573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061259691906141ff565b90506125b16125a7600a60646148c1565b61051b8388612083565b90506001600160601b0381111561261a5760405162461bcd60e51b815260206004820152602760248201527f6f7074696f6e5072656d69756d203e20747970652875696e74393629206d61786044820152662076616c75652160c81b6064820152608401610898565b9695505050505050565b60008061263283600a614796565b905060008611612642578061261a565b61261a8661051b612653888861209b565b8490612083565b6000600183116126a45760405162461bcd60e51b8152602060048201526015602482015274496e76616c6964206173736574506572536861726560581b6044820152606401610898565b6126bc6126b283600a614796565b61051b8686612083565b949350505050565b6000808385116126d55760006126df565b6126df858561209b565b905060008084116126f157600061261a565b61261a612702620f424060646148c1565b61051b8487612083565b6000600183116127565760405162461bcd60e51b8152602060048201526015602482015274496e76616c6964206173736574506572536861726560581b6044820152606401610898565b6126bc8361051b61276885600a614796565b8790612083565b600080806127936127816064806148c1565b61051b60a087013560c0880135612083565b92506127d16127a76060860135600a614796565b61051b60e0870135816127bf60608a01356008612077565b6127ca90600a614796565b8890612083565b91506001600160601b038311156128365760405162461bcd60e51b8152602060048201526024808201527f73656c6c416d6f756e74203e20747970652875696e74393629206d61782076616044820152636c75652160e01b6064820152608401610898565b6001600160601b038211156128995760405162461bcd60e51b815260206004820152602360248201527f627579416d6f756e74203e20747970652875696e74393629206d61782076616c60448201526275652160e81b6064820152608401610898565b6128cd6128ac6040860160208701613e01565b846128bd6060880160408901613e01565b6001600160a01b03169190612e9c565b6040805160018082528183019092526000916020808301908036833750506040805160018082528183019092529293506000929150602080830190803683375050604080516001808252818301909252929350600092915060208083019080368337019050509050848360008151811061295757634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160601b031690816001600160601b031681525050858260008151811061299957634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160601b031690816001600160601b031681525050600160001b816000815181106129df57634e487b7160e01b600052603260045260246000fd5b6020026020010181815250508660200160208101906129fe9190613e01565b6001600160a01b031663d225269c88608001358585856040518563ffffffff1660e01b8152600401612a339493929190614587565b602060405180830381600087803b158015612a4d57600080fd5b505af1158015612a61573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a8591906142a1565b9350612a9961012088016101008901613e01565b6001600160a01b0316612aaf6020890189613e01565b6040805160808b01358152602081018a90529081018890526001600160a01b0391909116907fa227b5eceb2bd983c0ed9dd34c971be74cd4f386b289d4415602a1fbcf2cb53b9060600160405180910390a35050509193909250565b600080612b23612b1e6020850185613e01565b61350e565b905060008111612b6a5760405162461bcd60e51b8152602060048201526012602482015271139bc81bdd1bdad95b9cc81d1bc81cd95b1b60721b6044820152606401610898565b612c10612b7d6040850160208601613e01565b612b8a6020860186613e01565b6040516370a0823160e01b81523060048201526001600160a01b0391909116906370a082319060240160206040518083038186803b158015612bcb57600080fd5b505afa158015612bdf573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c0391906141ff565b6128bd6020870187613e01565b6000612c2e612c24836402540be400612083565b85608001356135f6565b90506012846060013511612c6557612c60612c4e6012606087013561209b565b612c5990600a614796565b829061208f565b612c89565b612c89612c776060860135601261209b565b612c8290600a614796565b8290612083565b90506001600160601b03811115612d085760405162461bcd60e51b815260206004820152603a60248201527f6f7074696f6e5072656d69756d202a206f546f6b656e53656c6c416d6f756e7460448201527f203e20747970652875696e74393629206d61782076616c7565210000000000006064820152608401610898565b6000612d184260a0870135612077565b9050612d2a6040860160208701613e01565b6001600160a01b0316630a4cd6c9612d456020880188613e01565b612d556060890160408a01613e01565b60408051602081018252600080825291516001600160e01b031960e087901b168152612d94949392889283928c928c92600192829182916004016143f8565b602060405180830381600087803b158015612dae57600080fd5b505af1158015612dc2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612de691906141ff565b935033612df96060870160408801613e01565b6001600160a01b0316612e0f6020880188613e01565b6001600160a01b03167f95ad3b10488285d6307fda297f633faaf2a0d713c08ebe5f49c1b9255b01d29e87604051612e4991815260200190565b60405180910390a4505050919050565b60006001600160601b038216612e926bffffffffffffffffffffffff60601b606086901b166001600160c01b031960c088901b166146f9565b6126bc91906146f9565b801580612f255750604051636eb1769f60e11b81523060048201526001600160a01b03838116602483015284169063dd62ed3e9060440160206040518083038186803b158015612eeb57600080fd5b505afa158015612eff573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f2391906141ff565b155b612f905760405162461bcd60e51b815260206004820152603660248201527f5361666545524332303a20617070726f76652066726f6d206e6f6e2d7a65726f60448201527520746f206e6f6e2d7a65726f20616c6c6f77616e636560501b6064820152608401610898565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261026a908490613630565b600080612fee83613702565b905082811015610d68576130058162093a806146f9565b611ee2565b60008061301683613731565b9050600061302382613702565b905081811161303257806126bc565b6126bc62093a808261491f565b60008061304b8361375e565b90506000600382111561307f57600682111561307857600982111561307157600c613082565b6009613082565b6006613082565b60035b60ff169050600061309d6130958661377d565b836001613798565b90506130a88161300a565b95945050505050565b6000806130bd8361375e565b9050600060068211156130d157600c613082565b506006600061309d6130958661377d565b6001600160a01b0385166131295760405162461bcd60e51b815260206004820152600e60248201526d216f746f6b656e4164647265737360901b6044820152606401610898565b8354604080516379e13a5360e11b81529051879260ff161515916001600160a01b0384169163f3c274a691600480820192602092909190829003018186803b15801561317457600080fd5b505afa158015613188573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906131ac9190613f7b565b1515146131eb5760405162461bcd60e51b815260206004820152600d60248201526c0a8f2e0ca40dad2e6dac2e8c6d609b1b6044820152606401610898565b600185015460408051631c56369f60e21b815290516001600160a01b0392831692841691637158da7c916004808301926020929190829003018186803b15801561323457600080fd5b505afa158015613248573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061326c9190613e1d565b6001600160a01b0316146132ba5760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c81d5b99195c9b1e5a5b99d05cdcd95d605a1b6044820152606401610898565b836001600160a01b0316816001600160a01b031663aabaecd66040518163ffffffff1660e01b815260040160206040518083038186803b1580156132fd57600080fd5b505afa158015613311573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133359190613e1d565b6001600160a01b0316146133835760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c818dbdb1b185d195c985b105cdcd95d605a1b6044820152606401610898565b826001600160a01b0316816001600160a01b03166317d69bc86040518163ffffffff1660e01b815260040160206040518083038186803b1580156133c657600080fd5b505afa1580156133da573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133fe9190613e1d565b6001600160a01b03161461344a5760405162461bcd60e51b8152602060048201526013602482015272737472696b65417373657420213d205553444360681b6044820152606401610898565b60006134564284612077565b905080826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b15801561349257600080fd5b505afa1580156134a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134ca91906141ff565b101561206e5760405162461bcd60e51b8152602060048201526013602482015272457870697279206265666f72652064656c617960681b6044820152606401610898565b6040516370a0823160e01b815230600482015260009081906001600160a01b038416906370a082319060240160206040518083038186803b15801561355257600080fd5b505afa158015613566573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061358a91906141ff565b90506001600160601b03811115610d685760405162461bcd60e51b815260206004820152602a60248201527f6f546f6b656e53656c6c416d6f756e74203e20747970652875696e74393629206044820152696d61782076616c75652160b01b6064820152608401610898565b6000670de0b6b3a764000061362661360e85856137b3565b6136216002670de0b6b3a764000061473f565b61381a565b611ee2919061473f565b6000613685826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b031661386f9092919063ffffffff16565b80519091501561026a57808060200190518101906136a39190613f7b565b61026a5760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b6064820152608401610898565b600061370d8261387e565b61371a90620151806148c1565b61372783620697806146f9565b610d68919061491f565b6000620151806137276137438461377d565b61374c8561375e565b6137579060016146f9565b6001613798565b6000613775613770620151808461473f565b6138b2565b509392505050565b600061378f613770620151808461473f565b50909392505050565b6000620151806137a9858585613a26565b6126bc91906148c1565b60008115806137d7575082826137c981836148c1565b92506137d5908361473f565b145b610d685760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6d756c2d6f766572666c6f7760601b6044820152606401610898565b60008261382783826146f9565b9150811015610d685760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6164642d6f766572666c6f7760601b6044820152606401610898565b60606126bc8484600085613b63565b60008061388e620151808461473f565b9050600761389d8260036146f9565b6138a79190614966565b611ee29060016146f9565b60008080838162253d8c6138c98362010bd96146b8565b6138d391906146b8565b9050600062023ab16138e683600461483e565b6138f09190614711565b905060046139018262023ab161483e565b61390c9060036146b8565b6139169190614711565b61392090836148e0565b9150600062164b096139338460016146b8565b61393f90610fa061483e565b6139499190614711565b90506004613959826105b561483e565b6139639190614711565b61396d90846148e0565b61397890601f6146b8565b9250600061098f61398a85605061483e565b6139949190614711565b9050600060506139a68361098f61483e565b6139b09190614711565b6139ba90866148e0565b90506139c7600b83614711565b94506139d485600c61483e565b6139df8360026146b8565b6139e991906148e0565b915084836139f86031876148e0565b613a0390606461483e565b613a0d91906146b8565b613a1791906146b8565b9a919950975095505050505050565b60006107b2841015613a3757600080fd5b838383600062253d8c60046064600c613a51600e886148e0565b613a5b9190614711565b613a67886113246146b8565b613a7191906146b8565b613a7b9190614711565b613a8690600361483e565b613a909190614711565b600c80613a9e600e886148e0565b613aa89190614711565b613ab390600c61483e565b613abe6002886148e0565b613ac891906148e0565b613ad49061016f61483e565b613ade9190614711565b6004600c613aed600e896148e0565b613af79190614711565b613b03896112c06146b8565b613b0d91906146b8565b613b19906105b561483e565b613b239190614711565b613b2f617d4b876148e0565b613b3991906146b8565b613b4391906146b8565b613b4d91906148e0565b613b5791906148e0565b98975050505050505050565b606082471015613bc45760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b6064820152608401610898565b843b613c125760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610898565b600080866001600160a01b03168587604051613c2e91906143a3565b60006040518083038185875af1925050503d8060008114613c6b576040519150601f19603f3d011682016040523d82523d6000602084013e613c70565b606091505b509150915061239e82828660608315613c8a575081611ee2565b825115613c9a5782518084602001fd5b8160405162461bcd60e51b8152600401610898919061455b565b604080516101008101909152806000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001600081526020016000815260200160008152602001606081525090565b600082601f830112613d25578081fd5b81516020613d3a613d3583614694565b614663565b80838252828201915082860187848660051b8901011115613d59578586fd5b855b85811015613d80578151613d6e816149bc565b84529284019290840190600101613d5b565b5090979650505050505050565b600082601f830112613d9d578081fd5b81516020613dad613d3583614694565b80838252828201915082860187848660051b8901011115613dcc578586fd5b855b85811015613d8057815184529284019290840190600101613dce565b600060c08284031215613dfb578081fd5b50919050565b600060208284031215613e12578081fd5b8135611ee2816149bc565b600060208284031215613e2e578081fd5b8151611ee2816149bc565b60008060408385031215613e4b578081fd5b8235613e56816149bc565b91506020830135613e66816149bc565b809150509250929050565b600080600060608486031215613e85578081fd5b8335613e90816149bc565b92506020840135613ea0816149bc565b91506040840135613eb0816149bc565b809150509250925092565b60008060008060808587031215613ed0578182fd5b8435613edb816149bc565b93506020850135613eeb816149bc565b92506040850135613efb816149bc565b9396929550929360600135925050565b600080600080600080868803610180811215613f25578485fd5b8735613f30816149bc565b96506020880135613f40816149bc565b95506040880135945060e0605f1982011215613f5a578283fd5b50606087019250610140870135915061016087013590509295509295509295565b600060208284031215613f8c578081fd5b81518015158114611ee2578182fd5b600060c08284031215613fac578081fd5b611ee28383613dea565b600080600083850360a0811215613fcb578182fd5b6060811215613fd8578182fd5b508392506060840135613fea816149bc565b91506080840135613eb0816149bc565b60006101208284031215613dfb578081fd5b60008060006101008486031215614021578081fd5b833567ffffffffffffffff811115614037578182fd5b84016101c08187031215614049578182fd5b92506140588560208601613dea565b915060e084013590509250925092565b60008082840360c081121561407b578283fd5b8335925060a0601f1982011215614090578182fd5b506020830190509250929050565b6000602082840312156140af578081fd5b815167ffffffffffffffff808211156140c6578283fd5b9083019060c082860312156140d9578283fd5b6140e161463a565b8251828111156140ef578485fd5b6140fb87828601613d15565b82525060208301518281111561410f578485fd5b61411b87828601613d15565b602083015250604083015182811115614132578485fd5b61413e87828601613d15565b604083015250606083015182811115614155578485fd5b61416187828601613d8d565b606083015250608083015182811115614178578485fd5b61418487828601613d8d565b60808301525060a08301518281111561419b578485fd5b6141a787828601613d8d565b60a08301525095945050505050565b6000602082840312156141c7578081fd5b81356001600160681b0381168114611ee2578182fd5b6000602082840312156141ee578081fd5b813561ffff81168114611ee2578182fd5b600060208284031215614210578081fd5b5051919050565b60008060408385031215614229578182fd5b505080516020909101519092909150565b60006020828403121561424b578081fd5b813563ffffffff81168114611ee2578182fd5b60006020828403121561426f578081fd5b813566ffffffffffffff81168114611ee2578182fd5b600060208284031215614296578081fd5b8135611ee2816149d4565b6000602082840312156142b2578081fd5b8151611ee2816149d4565b6000602082840312156142ce578081fd5b815160ff81168114611ee2578182fd5b6000602082840312156142ef578081fd5b81356001600160601b0381168114611ee2578182fd5b6000815180845260208085019450808401835b8381101561433457815187529582019590820190600101614318565b509495945050505050565b6000815180845260208085019450808401835b838110156143345781516001600160601b031687529582019590820190600101614352565b6000815180845261438f816020860160208601614936565b601f01601f19169290920160200192915050565b600082516143b5818460208701614936565b9190910192915050565b6001600160a01b03968716815294861660208601529290941660408401526060830152608082019290925290151560a082015260c00190565b6001600160a01b038c811682528b81166020830152604082018b9052606082018a90526001600160601b038981166080840152881660a083015260c0820187905260e082018690528415156101008301528316610120820152610160610140820181905260009061446b83820185614377565b9e9d5050505050505050505050505050565b60006020808301818452808551808352604092508286019150828160051b870101848801865b8381101561454d57603f1989840301855281516101008151600b81106144d757634e487b7160e01b8b52602160045260248bfd5b8552818901516001600160a01b039081168a87015288830151811689870152606080840151909116908601526080808301519086015260a0808301519086015260c0808301519086015260e09182015191850181905261453981860183614377565b9689019694505050908601906001016144a3565b509098975050505050505050565b602081526000611ee26020830184614377565b8281526040602082015260006126bc6040830184614305565b84815260a0602082015260006145a060a083018661433f565b82810360408401526145b2818661433f565b905082810360608401526145c68185614305565b83810360809094019390935250506002815261060f60f31b6020820152604001949350505050565b6000808335601e19843603018112614604578283fd5b83018035915067ffffffffffffffff82111561461e578283fd5b60200191503681900382131561463357600080fd5b9250929050565b60405160c0810167ffffffffffffffff8111828210171561465d5761465d6149a6565b60405290565b604051601f8201601f1916810167ffffffffffffffff8111828210171561468c5761468c6149a6565b604052919050565b600067ffffffffffffffff8211156146ae576146ae6149a6565b5060051b60200190565b600080821280156001600160ff1b03849003851316156146da576146da61497a565b600160ff1b83900384128116156146f3576146f361497a565b50500190565b6000821982111561470c5761470c61497a565b500190565b60008261472057614720614990565b600160ff1b82146000198414161561473a5761473a61497a565b500590565b60008261474e5761474e614990565b500490565b600181815b8085111561478e5781600019048211156147745761477461497a565b8085161561478157918102915b93841c9390800290614758565b509250929050565b6000611ee283836000826147ac57506001610d68565b816147b957506000610d68565b81600181146147cf57600281146147d9576147f5565b6001915050610d68565b60ff8411156147ea576147ea61497a565b50506001821b610d68565b5060208310610133831016604e8410600b8410161715614818575081810a610d68565b6148228383614753565b80600019048211156148365761483661497a565b029392505050565b60006001600160ff1b03818413828413808216868404861116156148645761486461497a565b600160ff1b848712828116878305891216156148825761488261497a565b85871292508782058712848416161561489d5761489d61497a565b878505871281841616156148b3576148b361497a565b505050929093029392505050565b60008160001904831182151516156148db576148db61497a565b500290565b60008083128015600160ff1b8501841216156148fe576148fe61497a565b6001600160ff1b03840183138116156149195761491961497a565b50500390565b6000828210156149315761493161497a565b500390565b60005b83811015614951578181015183820152602001614939565b83811115614960576000848401525b50505050565b60008261497557614975614990565b500690565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b6001600160a01b03811681146149d157600080fd5b50565b67ffffffffffffffff811681146149d157600080fdfea2646970667358221220773ffc71a4bab8659e38859e5ea413cb00503f433c418c5869ccf0bfed7dfa0e64736f6c63430008040033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100a85760003560e01c806384d831a91161007057806384d831a9146101a757806395a170d7146101ba578063d8dfd0fe146101ff578063de8e34181461021f578063eebc5ff41461023f57600080fd5b806307cc4239146100ad5780632904c239146100cf57806358ffbb3d146101025780635a90235d14610122578063686fb2f21461016c575b600080fd5b8180156100b957600080fd5b506100cd6100c8366004613fb6565b61025f565b005b8180156100db57600080fd5b506100ef6100ea366004613ebb565b61026f565b6040519081526020015b60405180910390f35b81801561010e57600080fd5b506100ef61011d366004613e39565b6107d9565b81801561012e57600080fd5b5061014261013d366004613f0b565b610d6e565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100f9565b61017f61017a366004614068565b610fb3565b604080519586526020860194909452928401919091526060830152608082015260a0016100f9565b6100cd6101b536600461400c565b6110e5565b8180156101c657600080fd5b506101da6101d5366004613ffa565b6117ae565b60408051938452602084019290925267ffffffffffffffff16908201526060016100f9565b81801561020b57600080fd5b506100ef61021a366004613e01565b6117c9565b81801561022b57600080fd5b506100ef61023a366004613e71565b611b9d565b81801561024b57600080fd5b506100ef61025a366004613f9b565b611ee9565b61026a838383611ef4565b505050565b604051636553690d60e11b8152306004820152600090859082906102fa906001906001600160a01b0385169063caa6d21a9060240160206040518083038186803b1580156102bc57600080fd5b505afa1580156102d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102f491906141ff565b90612077565b905060008590506000816001600160a01b031663aabaecd66040518163ffffffff1660e01b815260040160206040518083038186803b15801561033c57600080fd5b505afa158015610350573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103749190613e1d565b90506000816001600160a01b031663313ce5676040518163ffffffff1660e01b815260040160206040518083038186803b1580156103b157600080fd5b505afa1580156103c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103e991906142bd565b60ff1690506000836001600160a01b031663f3c274a66040518163ffffffff1660e01b815260040160206040518083038186803b15801561042957600080fd5b505afa15801561043d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104619190613f7b565b15610528576105216104f961047784600a6146f9565b61048290600a614796565b866001600160a01b031663c52987cf6040518163ffffffff1660e01b815260040160206040518083038186803b1580156104bb57600080fd5b505afa1580156104cf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104f391906141ff565b90612083565b61051b670de0b6b3a76400006104f36105146008600a614796565b8d90612083565b9061208f565b9050610564565b5086600882111561056457600061054083600861209b565b61054b90600a614796565b9050808211156105625761055f898261208f565b91505b505b826105796001600160a01b0382168c8b6120a7565b60408051600380825260808201909252600091816020015b610599613cb4565b815260200190600190039081610591579050506040805161010081019091529091508060008152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b031681526020018881526020016000815260200160008152602001604051806020016040528060008152508152508160008151811061063957634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060058152602001306001600160a01b03168152602001306001600160a01b03168152602001866001600160a01b031681526020018881526020018b81526020016000815260200160405180602001604052806000815250815250816001815181106106cc57634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060018152602001306001600160a01b03168152602001306001600160a01b031681526020018c6001600160a01b0316815260200188815260200184815260200160008152602001604051806020016040528060008152508152508160028151811061075f57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0389169063b617f0c69061079690849060040161447d565b600060405180830381600087803b1580156107b057600080fd5b505af11580156107c4573d6000803e3d6000fd5b50949f9e505050505050505050505050505050565b6040516370a0823160e01b815230600482015260009081906001600160a01b038416906370a082319060240160206040518083038186803b15801561081d57600080fd5b505afa158015610831573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061085591906141ff565b9050600081116108a15760405162461bcd60e51b815260206004820152601260248201527127379037aa37b5b2b739903a3790313ab93760711b60448201526064015b60405180910390fd5b604051636553690d60e11b815230600482015284906000906001600160a01b0383169063caa6d21a9060240160206040518083038186803b1580156108e557600080fd5b505afa1580156108f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091d91906141ff565b60405163d99d13f560e01b8152306004820152602481018290529091506000906001600160a01b0384169063d99d13f59060440160006040518083038186803b15801561096957600080fd5b505afa15801561097d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109a5919081019061409e565b8051519091506109e25760405162461bcd60e51b8152602060048201526008602482015267139bc81cda1bdc9d60c21b6044820152606401610898565b60008160400151600081518110610a0957634e487b7160e01b600052603260045260246000fd5b60209081029190910101516040516370a0823160e01b81523060048201529091506000906001600160a01b038316906370a082319060240160206040518083038186803b158015610a5957600080fd5b505afa158015610a6d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9191906141ff565b6040805160028082526060820190925291925060009190816020015b610ab5613cb4565b815260200190600190039081610aad5790505060408051610100810190915290915080600281523060208201819052604082015285518051606090920191600090610b1057634e487b7160e01b600052603260045260246000fd5b60200260200101516001600160a01b03168152602001868152602001888152602001600081526020016040518060200160405280600081525081525081600081518110610b6d57634e487b7160e01b600052603260045260246000fd5b60209081029190910101526040805161010081019091528060068152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b03168152602001868152602001610c2e8660600151600081518110610be757634e487b7160e01b600052603260045260246000fd5b602002602001015161051b8b8960a00151600081518110610c1857634e487b7160e01b600052603260045260246000fd5b602002602001015161208390919063ffffffff16565b8152602001600081526020016040518060200160405280600081525081525081600181518110610c6e57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690610ca590849060040161447d565b600060405180830381600087803b158015610cbf57600080fd5b505af1158015610cd3573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03861691506370a082319060240160206040518083038186803b158015610d1957600080fd5b505afa158015610d2d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5191906141ff565b9050610d5d818461209b565b985050505050505050505b92915050565b60008080808080610d8560608a0160408b01613e01565b6001600160a01b03161415610da957610da2428960c001356120e3565b9050610e39565b610e36610dbc60608a0160408b01613e01565b6001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b158015610df457600080fd5b505afa158015610e08573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e2c91906141ff565b8960c001356120e3565b90505b8654600188015487548d9260ff8116926001600160a01b039081169262010000909204169061ffff16610e7260a08e0160808f016141dd565b61ffff1614610eff5760405163e436b89160e01b81526004810186905283151560248201526001600160a01b0385169063e436b89190604401604080518083038186803b158015610ec257600080fd5b505afa158015610ed6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610efa9190614217565b610f07565b8b60a0013560005b909750955086610f485760405162461bcd60e51b815260206004820152600c60248201526b21737472696b65507269636560a01b6044820152606401610898565b610f578c8c84848b8a89612215565b9850610f64898f8f6123a9565b975060008811610fa15760405162461bcd60e51b8152602060048201526008602482015267217072656d69756d60c01b6044820152606401610898565b50505050509650965096509692505050565b600182015460009081908190819081906020870135906001600160801b0380821691600160801b9004168380610ff060408c013586868e35612624565b90506000808c6040013511611006576000611012565b61101284838e3561265a565b905060008c606001358211611028576000611036565b6110368260608f013561209b565b9050611046816102f4898561209b565b60018f015490945061106b93508492506001600160801b0316905060808d01356126c4565b9450611077848661209b565b935061108a60408b013585858d35612624565b965061109883888c3561270c565b955060006110aa60408c013588612077565b9050600081116110bb5760006110c7565b6110c783898d3561265a565b98506110d59050848961209b565b9850505050509295509295909350565b60006110f46020850185613e01565b6001600160a01b031614156111355760405162461bcd60e51b815260206004820152600760248201526610afb7bbb732b960c91b6044820152606401610898565b60006111476040850160208601613e01565b6001600160a01b031614156111895760405162461bcd60e51b815260206004820152600860248201526710afb5b2b2b832b960c11b6044820152606401610898565b600061119b6060850160408601613e01565b6001600160a01b031614156111e35760405162461bcd60e51b815260206004820152600e60248201526d0857d99959549958da5c1a595b9d60921b6044820152606401610898565b6111f1620f424060646148c1565b83608001351061123c5760405162461bcd60e51b8152602060048201526016602482015275706572666f726d616e6365466565203e3d203130302560501b6044820152606401610898565b61124a620f424060646148c1565b8360600135106112945760405162461bcd60e51b81526020600482015260156024820152746d616e6167656d656e74466565203e3d203130302560581b6044820152606401610898565b60006112a360a08501856145ee565b9050116112e05760405162461bcd60e51b815260206004820152600b60248201526a215f746f6b656e4e616d6560a81b6044820152606401610898565b60006112ef60c08501856145ee565b90501161132e5760405162461bcd60e51b815260206004820152600d60248201526c0857dd1bdad95b94de5b589bdb609a1b6044820152606401610898565b826101600135600714806113475750826101600135600e145b806113575750826101600135601e145b806113675750826101600135605a145b80611377575082610160013560b4145b6113ae5760405162461bcd60e51b81526020600482015260086024820152670857dc195c9a5bd960c21b6044820152606401610898565b60006113c1610100850160e08601613e01565b6001600160a01b031614156114115760405162461bcd60e51b815260206004820152601660248201527510afb7b83a34b7b739a83932b6b4bab6a83934b1b2b960511b6044820152606401610898565b600061142561012085016101008601613e01565b6001600160a01b031614156114705760405162461bcd60e51b815260206004820152601160248201527010afb9ba3934b5b2a9b2b632b1ba34b7b760791b6044820152606401610898565b60006114846101408501610120860161423a565b63ffffffff161180156114b8575061149e600a60646148c1565b6114b06101408501610120860161423a565b63ffffffff16105b6114f85760405162461bcd60e51b81526020600482015260116024820152700857dc1c995b5a5d5b511a5cd8dbdd5b9d607a1b6044820152606401610898565b8083610140013510156115415760405162461bcd60e51b815260206004820152601160248201527010afb0bab1ba34b7b7223ab930ba34b7b760791b6044820152606401610898565b6000836101800135116115885760405162461bcd60e51b815260206004820152600f60248201526e215f6d61784465706f7369746f727360881b6044820152606401610898565b6000836101a00135116115cc5760405162461bcd60e51b815260206004820152600c60248201526b0857db5a5b91195c1bdcda5d60a21b6044820152606401610898565b60006115de6060840160408501613e01565b6001600160a01b0316141561161e5760405162461bcd60e51b815260206004820152600660248201526508585cdcd95d60d21b6044820152606401610898565b60006116306080840160608501613e01565b6001600160a01b031614156116755760405162461bcd60e51b815260206004820152600b60248201526a21756e6465726c79696e6760a81b6044820152606401610898565b600061168760a084016080850161425e565b66ffffffffffffff16116116ce5760405162461bcd60e51b815260206004820152600e60248201526d216d696e696d756d537570706c7960901b6044820152606401610898565b60006116e060c0840160a085016141b6565b6001600160681b03161161171f5760405162461bcd60e51b8152600401610898906020808252600490820152630216361760e41b604082015260600190565b61172f60a083016080840161425e565b66ffffffffffffff1661174860c0840160a085016141b6565b6001600160681b03161161026a5760405162461bcd60e51b815260206004820152602760248201527f6361702068617320746f20626520686967686572207468616e206d696e696d756044820152666d537570706c7960c81b6064820152608401610898565b60008060006117bc8461276f565b9250925092509193909250565b604051636553690d60e11b8152306004820152600090829082906001600160a01b0383169063caa6d21a9060240160206040518083038186803b15801561180f57600080fd5b505afa158015611823573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061184791906141ff565b60405163d99d13f560e01b8152306004820152602481018290529091506000906001600160a01b0384169063d99d13f59060440160006040518083038186803b15801561189357600080fd5b505afa1580156118a7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526118cf919081019061409e565b80515190915061190c5760405162461bcd60e51b8152602060048201526008602482015267139bc81cda1bdc9d60c21b6044820152606401610898565b6000816040015160008151811061193357634e487b7160e01b600052603260045260246000fd5b6020026020010151905060006001600160a01b0316816001600160a01b031614156119645750600095945050505050565b6040516370a0823160e01b81523060048201526000906001600160a01b038316906370a082319060240160206040518083038186803b1580156119a657600080fd5b505afa1580156119ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119de91906141ff565b60408051600180825281830190925291925060009190816020015b611a01613cb4565b8152602001906001900390816119f9579050506040805161010081019091529091508060078152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b0316815260200186815260200160008152602001600081526020016040518060200160405280600081525081525081600081518110611aa157634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690611ad890849060040161447d565b600060405180830381600087803b158015611af257600080fd5b505af1158015611b06573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03861691506370a082319060240160206040518083038186803b158015611b4c57600080fd5b505afa158015611b60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b8491906141ff565b9050611b90818461209b565b9998505050505050505050565b6040516370a0823160e01b8152306004820152600090849082906001600160a01b038616906370a082319060240160206040518083038186803b158015611be357600080fd5b505afa158015611bf7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c1b91906141ff565b60405163565eea1960e01b81526001600160a01b038781166004830152602482018390529192509083169063565eea199060440160206040518083038186803b158015611c6757600080fd5b505afa158015611c7b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9f91906141ff565b611cae57600092505050611ee2565b6040516370a0823160e01b81523060048201526000906001600160a01b038616906370a082319060240160206040518083038186803b158015611cf057600080fd5b505afa158015611d04573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d2891906141ff565b60408051600180825281830190925291925060009190816020015b611d4b613cb4565b815260200190600190039081611d4357905050604080516101008101909152909150806008815260200160006001600160a01b03168152602001306001600160a01b03168152602001886001600160a01b0316815260200160008152602001848152602001600081526020016040518060200160405280600081525081525081600081518110611deb57634e487b7160e01b600052603260045260246000fd5b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c690611e2290849060040161447d565b600060405180830381600087803b158015611e3c57600080fd5b505af1158015611e50573d6000803e3d6000fd5b50506040516370a0823160e01b8152306004820152600092506001600160a01b03891691506370a082319060240160206040518083038186803b158015611e9657600080fd5b505afa158015611eaa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ece91906141ff565b9050611eda818461209b565b955050505050505b9392505050565b6000610d6882612b0b565b6000611f2b611f096060860160408701614285565b611f1960408701602088016142de565b611f2660208801886142de565b612e59565b60408051600180825281830190925291925060009190602080830190803683370190505090508181600081518110611f7357634e487b7160e01b600052603260045260246000fd5b602002602001018181525050836001600160a01b0316637882deaf846001600160a01b031663432833a66040518163ffffffff1660e01b815260040160206040518083038186803b158015611fc757600080fd5b505afa158015611fdb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fff91906141ff565b836040518363ffffffff1660e01b815260040161201d92919061456e565b6040805180830381600087803b15801561203657600080fd5b505af115801561204a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061206e9190614217565b50505050505050565b6000611ee282846146f9565b6000611ee282846148c1565b6000611ee2828461473f565b6000611ee2828461491f565b6001600160a01b03831673dac17f958d2ee523a2206206994597c13d831ec714156120d8576120d883836000612e9c565b61026a838383612e9c565b6000816007141561211b576120f783612fe2565b9050828111156121075780612114565b6121148162093a806146f9565b90506121f2565b81600e141561214a5761212d83612fe2565b90508281111561213d5780612114565b61211481621275006146f9565b81601e14156121815761215c8361300a565b90508281111561216c5780612114565b61211461217c8262093a806146f9565b61300a565b81605a14156121b8576121938361303f565b9050828111156121a35780612114565b6121146121b38262093a806146f9565b61303f565b8160b414156121f2576121ca836130b1565b9050828111156121da57806121ef565b6121ef6121ea8262093a806146f9565b6130b1565b90505b6121ff6201518082614966565b612209908261491f565b611ee2906170806146f9565b60008061222560208a018a613e01565b905060006001600160a01b03821663115470548961224960408e0160208f01613e01565b8a8a8a8a6040518763ffffffff1660e01b815260040161226e969594939291906143bf565b60206040518083038186803b15801561228657600080fd5b505afa15801561229a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122be9190613e1d565b90506001600160a01b038116156122d857915061239e9050565b6000826001600160a01b031663c09746308a8d60200160208101906122fd9190613e01565b8b8b8b8b6040518763ffffffff1660e01b8152600401612322969594939291906143bf565b602060405180830381600087803b15801561233c57600080fd5b505af1158015612350573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906123749190613e1d565b9050612399818b8a8e602001602081019061238f9190613e01565b8f606001356130e2565b925050505b979650505050505050565b60008084905060008490506000816001600160a01b03166330a75871846001600160a01b031663c52987cf6040518163ffffffff1660e01b815260040160206040518083038186803b1580156123fe57600080fd5b505afa158015612412573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061243691906141ff565b856001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b15801561246f57600080fd5b505afa158015612483573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124a791906141ff565b866001600160a01b031663f3c274a66040518163ffffffff1660e01b815260040160206040518083038186803b1580156124e057600080fd5b505afa1580156124f4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906125189190613f7b565b6040516001600160e01b031960e086901b168152600481019390935260248301919091521515604482015260640160206040518083038186803b15801561255e57600080fd5b505afa158015612572573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061259691906141ff565b90506125b16125a7600a60646148c1565b61051b8388612083565b90506001600160601b0381111561261a5760405162461bcd60e51b815260206004820152602760248201527f6f7074696f6e5072656d69756d203e20747970652875696e74393629206d61786044820152662076616c75652160c81b6064820152608401610898565b9695505050505050565b60008061263283600a614796565b905060008611612642578061261a565b61261a8661051b612653888861209b565b8490612083565b6000600183116126a45760405162461bcd60e51b8152602060048201526015602482015274496e76616c6964206173736574506572536861726560581b6044820152606401610898565b6126bc6126b283600a614796565b61051b8686612083565b949350505050565b6000808385116126d55760006126df565b6126df858561209b565b905060008084116126f157600061261a565b61261a612702620f424060646148c1565b61051b8487612083565b6000600183116127565760405162461bcd60e51b8152602060048201526015602482015274496e76616c6964206173736574506572536861726560581b6044820152606401610898565b6126bc8361051b61276885600a614796565b8790612083565b600080806127936127816064806148c1565b61051b60a087013560c0880135612083565b92506127d16127a76060860135600a614796565b61051b60e0870135816127bf60608a01356008612077565b6127ca90600a614796565b8890612083565b91506001600160601b038311156128365760405162461bcd60e51b8152602060048201526024808201527f73656c6c416d6f756e74203e20747970652875696e74393629206d61782076616044820152636c75652160e01b6064820152608401610898565b6001600160601b038211156128995760405162461bcd60e51b815260206004820152602360248201527f627579416d6f756e74203e20747970652875696e74393629206d61782076616c60448201526275652160e81b6064820152608401610898565b6128cd6128ac6040860160208701613e01565b846128bd6060880160408901613e01565b6001600160a01b03169190612e9c565b6040805160018082528183019092526000916020808301908036833750506040805160018082528183019092529293506000929150602080830190803683375050604080516001808252818301909252929350600092915060208083019080368337019050509050848360008151811061295757634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160601b031690816001600160601b031681525050858260008151811061299957634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160601b031690816001600160601b031681525050600160001b816000815181106129df57634e487b7160e01b600052603260045260246000fd5b6020026020010181815250508660200160208101906129fe9190613e01565b6001600160a01b031663d225269c88608001358585856040518563ffffffff1660e01b8152600401612a339493929190614587565b602060405180830381600087803b158015612a4d57600080fd5b505af1158015612a61573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a8591906142a1565b9350612a9961012088016101008901613e01565b6001600160a01b0316612aaf6020890189613e01565b6040805160808b01358152602081018a90529081018890526001600160a01b0391909116907fa227b5eceb2bd983c0ed9dd34c971be74cd4f386b289d4415602a1fbcf2cb53b9060600160405180910390a35050509193909250565b600080612b23612b1e6020850185613e01565b61350e565b905060008111612b6a5760405162461bcd60e51b8152602060048201526012602482015271139bc81bdd1bdad95b9cc81d1bc81cd95b1b60721b6044820152606401610898565b612c10612b7d6040850160208601613e01565b612b8a6020860186613e01565b6040516370a0823160e01b81523060048201526001600160a01b0391909116906370a082319060240160206040518083038186803b158015612bcb57600080fd5b505afa158015612bdf573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c0391906141ff565b6128bd6020870187613e01565b6000612c2e612c24836402540be400612083565b85608001356135f6565b90506012846060013511612c6557612c60612c4e6012606087013561209b565b612c5990600a614796565b829061208f565b612c89565b612c89612c776060860135601261209b565b612c8290600a614796565b8290612083565b90506001600160601b03811115612d085760405162461bcd60e51b815260206004820152603a60248201527f6f7074696f6e5072656d69756d202a206f546f6b656e53656c6c416d6f756e7460448201527f203e20747970652875696e74393629206d61782076616c7565210000000000006064820152608401610898565b6000612d184260a0870135612077565b9050612d2a6040860160208701613e01565b6001600160a01b0316630a4cd6c9612d456020880188613e01565b612d556060890160408a01613e01565b60408051602081018252600080825291516001600160e01b031960e087901b168152612d94949392889283928c928c92600192829182916004016143f8565b602060405180830381600087803b158015612dae57600080fd5b505af1158015612dc2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612de691906141ff565b935033612df96060870160408801613e01565b6001600160a01b0316612e0f6020880188613e01565b6001600160a01b03167f95ad3b10488285d6307fda297f633faaf2a0d713c08ebe5f49c1b9255b01d29e87604051612e4991815260200190565b60405180910390a4505050919050565b60006001600160601b038216612e926bffffffffffffffffffffffff60601b606086901b166001600160c01b031960c088901b166146f9565b6126bc91906146f9565b801580612f255750604051636eb1769f60e11b81523060048201526001600160a01b03838116602483015284169063dd62ed3e9060440160206040518083038186803b158015612eeb57600080fd5b505afa158015612eff573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f2391906141ff565b155b612f905760405162461bcd60e51b815260206004820152603660248201527f5361666545524332303a20617070726f76652066726f6d206e6f6e2d7a65726f60448201527520746f206e6f6e2d7a65726f20616c6c6f77616e636560501b6064820152608401610898565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261026a908490613630565b600080612fee83613702565b905082811015610d68576130058162093a806146f9565b611ee2565b60008061301683613731565b9050600061302382613702565b905081811161303257806126bc565b6126bc62093a808261491f565b60008061304b8361375e565b90506000600382111561307f57600682111561307857600982111561307157600c613082565b6009613082565b6006613082565b60035b60ff169050600061309d6130958661377d565b836001613798565b90506130a88161300a565b95945050505050565b6000806130bd8361375e565b9050600060068211156130d157600c613082565b506006600061309d6130958661377d565b6001600160a01b0385166131295760405162461bcd60e51b815260206004820152600e60248201526d216f746f6b656e4164647265737360901b6044820152606401610898565b8354604080516379e13a5360e11b81529051879260ff161515916001600160a01b0384169163f3c274a691600480820192602092909190829003018186803b15801561317457600080fd5b505afa158015613188573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906131ac9190613f7b565b1515146131eb5760405162461bcd60e51b815260206004820152600d60248201526c0a8f2e0ca40dad2e6dac2e8c6d609b1b6044820152606401610898565b600185015460408051631c56369f60e21b815290516001600160a01b0392831692841691637158da7c916004808301926020929190829003018186803b15801561323457600080fd5b505afa158015613248573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061326c9190613e1d565b6001600160a01b0316146132ba5760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c81d5b99195c9b1e5a5b99d05cdcd95d605a1b6044820152606401610898565b836001600160a01b0316816001600160a01b031663aabaecd66040518163ffffffff1660e01b815260040160206040518083038186803b1580156132fd57600080fd5b505afa158015613311573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133359190613e1d565b6001600160a01b0316146133835760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c818dbdb1b185d195c985b105cdcd95d605a1b6044820152606401610898565b826001600160a01b0316816001600160a01b03166317d69bc86040518163ffffffff1660e01b815260040160206040518083038186803b1580156133c657600080fd5b505afa1580156133da573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133fe9190613e1d565b6001600160a01b03161461344a5760405162461bcd60e51b8152602060048201526013602482015272737472696b65417373657420213d205553444360681b6044820152606401610898565b60006134564284612077565b905080826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b815260040160206040518083038186803b15801561349257600080fd5b505afa1580156134a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134ca91906141ff565b101561206e5760405162461bcd60e51b8152602060048201526013602482015272457870697279206265666f72652064656c617960681b6044820152606401610898565b6040516370a0823160e01b815230600482015260009081906001600160a01b038416906370a082319060240160206040518083038186803b15801561355257600080fd5b505afa158015613566573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061358a91906141ff565b90506001600160601b03811115610d685760405162461bcd60e51b815260206004820152602a60248201527f6f546f6b656e53656c6c416d6f756e74203e20747970652875696e74393629206044820152696d61782076616c75652160b01b6064820152608401610898565b6000670de0b6b3a764000061362661360e85856137b3565b6136216002670de0b6b3a764000061473f565b61381a565b611ee2919061473f565b6000613685826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b031661386f9092919063ffffffff16565b80519091501561026a57808060200190518101906136a39190613f7b565b61026a5760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b6064820152608401610898565b600061370d8261387e565b61371a90620151806148c1565b61372783620697806146f9565b610d68919061491f565b6000620151806137276137438461377d565b61374c8561375e565b6137579060016146f9565b6001613798565b6000613775613770620151808461473f565b6138b2565b509392505050565b600061378f613770620151808461473f565b50909392505050565b6000620151806137a9858585613a26565b6126bc91906148c1565b60008115806137d7575082826137c981836148c1565b92506137d5908361473f565b145b610d685760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6d756c2d6f766572666c6f7760601b6044820152606401610898565b60008261382783826146f9565b9150811015610d685760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6164642d6f766572666c6f7760601b6044820152606401610898565b60606126bc8484600085613b63565b60008061388e620151808461473f565b9050600761389d8260036146f9565b6138a79190614966565b611ee29060016146f9565b60008080838162253d8c6138c98362010bd96146b8565b6138d391906146b8565b9050600062023ab16138e683600461483e565b6138f09190614711565b905060046139018262023ab161483e565b61390c9060036146b8565b6139169190614711565b61392090836148e0565b9150600062164b096139338460016146b8565b61393f90610fa061483e565b6139499190614711565b90506004613959826105b561483e565b6139639190614711565b61396d90846148e0565b61397890601f6146b8565b9250600061098f61398a85605061483e565b6139949190614711565b9050600060506139a68361098f61483e565b6139b09190614711565b6139ba90866148e0565b90506139c7600b83614711565b94506139d485600c61483e565b6139df8360026146b8565b6139e991906148e0565b915084836139f86031876148e0565b613a0390606461483e565b613a0d91906146b8565b613a1791906146b8565b9a919950975095505050505050565b60006107b2841015613a3757600080fd5b838383600062253d8c60046064600c613a51600e886148e0565b613a5b9190614711565b613a67886113246146b8565b613a7191906146b8565b613a7b9190614711565b613a8690600361483e565b613a909190614711565b600c80613a9e600e886148e0565b613aa89190614711565b613ab390600c61483e565b613abe6002886148e0565b613ac891906148e0565b613ad49061016f61483e565b613ade9190614711565b6004600c613aed600e896148e0565b613af79190614711565b613b03896112c06146b8565b613b0d91906146b8565b613b19906105b561483e565b613b239190614711565b613b2f617d4b876148e0565b613b3991906146b8565b613b4391906146b8565b613b4d91906148e0565b613b5791906148e0565b98975050505050505050565b606082471015613bc45760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b6064820152608401610898565b843b613c125760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610898565b600080866001600160a01b03168587604051613c2e91906143a3565b60006040518083038185875af1925050503d8060008114613c6b576040519150601f19603f3d011682016040523d82523d6000602084013e613c70565b606091505b509150915061239e82828660608315613c8a575081611ee2565b825115613c9a5782518084602001fd5b8160405162461bcd60e51b8152600401610898919061455b565b604080516101008101909152806000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001600081526020016000815260200160008152602001606081525090565b600082601f830112613d25578081fd5b81516020613d3a613d3583614694565b614663565b80838252828201915082860187848660051b8901011115613d59578586fd5b855b85811015613d80578151613d6e816149bc565b84529284019290840190600101613d5b565b5090979650505050505050565b600082601f830112613d9d578081fd5b81516020613dad613d3583614694565b80838252828201915082860187848660051b8901011115613dcc578586fd5b855b85811015613d8057815184529284019290840190600101613dce565b600060c08284031215613dfb578081fd5b50919050565b600060208284031215613e12578081fd5b8135611ee2816149bc565b600060208284031215613e2e578081fd5b8151611ee2816149bc565b60008060408385031215613e4b578081fd5b8235613e56816149bc565b91506020830135613e66816149bc565b809150509250929050565b600080600060608486031215613e85578081fd5b8335613e90816149bc565b92506020840135613ea0816149bc565b91506040840135613eb0816149bc565b809150509250925092565b60008060008060808587031215613ed0578182fd5b8435613edb816149bc565b93506020850135613eeb816149bc565b92506040850135613efb816149bc565b9396929550929360600135925050565b600080600080600080868803610180811215613f25578485fd5b8735613f30816149bc565b96506020880135613f40816149bc565b95506040880135945060e0605f1982011215613f5a578283fd5b50606087019250610140870135915061016087013590509295509295509295565b600060208284031215613f8c578081fd5b81518015158114611ee2578182fd5b600060c08284031215613fac578081fd5b611ee28383613dea565b600080600083850360a0811215613fcb578182fd5b6060811215613fd8578182fd5b508392506060840135613fea816149bc565b91506080840135613eb0816149bc565b60006101208284031215613dfb578081fd5b60008060006101008486031215614021578081fd5b833567ffffffffffffffff811115614037578182fd5b84016101c08187031215614049578182fd5b92506140588560208601613dea565b915060e084013590509250925092565b60008082840360c081121561407b578283fd5b8335925060a0601f1982011215614090578182fd5b506020830190509250929050565b6000602082840312156140af578081fd5b815167ffffffffffffffff808211156140c6578283fd5b9083019060c082860312156140d9578283fd5b6140e161463a565b8251828111156140ef578485fd5b6140fb87828601613d15565b82525060208301518281111561410f578485fd5b61411b87828601613d15565b602083015250604083015182811115614132578485fd5b61413e87828601613d15565b604083015250606083015182811115614155578485fd5b61416187828601613d8d565b606083015250608083015182811115614178578485fd5b61418487828601613d8d565b60808301525060a08301518281111561419b578485fd5b6141a787828601613d8d565b60a08301525095945050505050565b6000602082840312156141c7578081fd5b81356001600160681b0381168114611ee2578182fd5b6000602082840312156141ee578081fd5b813561ffff81168114611ee2578182fd5b600060208284031215614210578081fd5b5051919050565b60008060408385031215614229578182fd5b505080516020909101519092909150565b60006020828403121561424b578081fd5b813563ffffffff81168114611ee2578182fd5b60006020828403121561426f578081fd5b813566ffffffffffffff81168114611ee2578182fd5b600060208284031215614296578081fd5b8135611ee2816149d4565b6000602082840312156142b2578081fd5b8151611ee2816149d4565b6000602082840312156142ce578081fd5b815160ff81168114611ee2578182fd5b6000602082840312156142ef578081fd5b81356001600160601b0381168114611ee2578182fd5b6000815180845260208085019450808401835b8381101561433457815187529582019590820190600101614318565b509495945050505050565b6000815180845260208085019450808401835b838110156143345781516001600160601b031687529582019590820190600101614352565b6000815180845261438f816020860160208601614936565b601f01601f19169290920160200192915050565b600082516143b5818460208701614936565b9190910192915050565b6001600160a01b03968716815294861660208601529290941660408401526060830152608082019290925290151560a082015260c00190565b6001600160a01b038c811682528b81166020830152604082018b9052606082018a90526001600160601b038981166080840152881660a083015260c0820187905260e082018690528415156101008301528316610120820152610160610140820181905260009061446b83820185614377565b9e9d5050505050505050505050505050565b60006020808301818452808551808352604092508286019150828160051b870101848801865b8381101561454d57603f1989840301855281516101008151600b81106144d757634e487b7160e01b8b52602160045260248bfd5b8552818901516001600160a01b039081168a87015288830151811689870152606080840151909116908601526080808301519086015260a0808301519086015260c0808301519086015260e09182015191850181905261453981860183614377565b9689019694505050908601906001016144a3565b509098975050505050505050565b602081526000611ee26020830184614377565b8281526040602082015260006126bc6040830184614305565b84815260a0602082015260006145a060a083018661433f565b82810360408401526145b2818661433f565b905082810360608401526145c68185614305565b83810360809094019390935250506002815261060f60f31b6020820152604001949350505050565b6000808335601e19843603018112614604578283fd5b83018035915067ffffffffffffffff82111561461e578283fd5b60200191503681900382131561463357600080fd5b9250929050565b60405160c0810167ffffffffffffffff8111828210171561465d5761465d6149a6565b60405290565b604051601f8201601f1916810167ffffffffffffffff8111828210171561468c5761468c6149a6565b604052919050565b600067ffffffffffffffff8211156146ae576146ae6149a6565b5060051b60200190565b600080821280156001600160ff1b03849003851316156146da576146da61497a565b600160ff1b83900384128116156146f3576146f361497a565b50500190565b6000821982111561470c5761470c61497a565b500190565b60008261472057614720614990565b600160ff1b82146000198414161561473a5761473a61497a565b500590565b60008261474e5761474e614990565b500490565b600181815b8085111561478e5781600019048211156147745761477461497a565b8085161561478157918102915b93841c9390800290614758565b509250929050565b6000611ee283836000826147ac57506001610d68565b816147b957506000610d68565b81600181146147cf57600281146147d9576147f5565b6001915050610d68565b60ff8411156147ea576147ea61497a565b50506001821b610d68565b5060208310610133831016604e8410600b8410161715614818575081810a610d68565b6148228383614753565b80600019048211156148365761483661497a565b029392505050565b60006001600160ff1b03818413828413808216868404861116156148645761486461497a565b600160ff1b848712828116878305891216156148825761488261497a565b85871292508782058712848416161561489d5761489d61497a565b878505871281841616156148b3576148b361497a565b505050929093029392505050565b60008160001904831182151516156148db576148db61497a565b500290565b60008083128015600160ff1b8501841216156148fe576148fe61497a565b6001600160ff1b03840183138116156149195761491961497a565b50500390565b6000828210156149315761493161497a565b500390565b60005b83811015614951578181015183820152602001614939565b83811115614960576000848401525b50505050565b60008261497557614975614990565b500690565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052601260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b6001600160a01b03811681146149d157600080fd5b50565b67ffffffffffffffff811681146149d157600080fdfea2646970667358221220773ffc71a4bab8659e38859e5ea413cb00503f433c418c5869ccf0bfed7dfa0e64736f6c63430008040033",
  "devdoc": {
    "kind": "dev",
    "methods": {
      "burnOtokens(address,address)": {
        "params": {
          "currentOption": "is the address of the current option",
          "gammaController": "is the address of the opyn controller contract"
        },
        "returns": {
          "_0": "amount of collateral redeemed by burning otokens"
        }
      },
      "claimAuctionOtokens(Vault.AuctionSellOrder,address,address)": {
        "params": {
          "auctionSellOrder": "is the sell order of the bid",
          "counterpartyThetaVault": "is the address of the counterparty theta vault of this delta vault",
          "gnosisEasyAuction": "is the address of the gnosis auction contract holding custody to the funds"
        }
      },
      "commitAndClose(address,address,uint256,VaultLifecycleTreasury.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)": {
        "params": {
          "closeParams": "is the struct with details on previous option and strike selection details",
          "optionsPremiumPricer": "is the address of the contract with the black-scholes premium calculation logic",
          "premiumDiscount": "is the vault's discount applied to the premium",
          "strikeSelection": "is the address of the contract with strike selection logic",
          "vaultParams": "is the struct with vault general data",
          "vaultState": "is the struct with vault accounting state"
        },
        "returns": {
          "delta": "is the delta of the new option",
          "otokenAddress": "is the address of the new option",
          "premium": "is the premium of the new option",
          "strikePrice": "is the strike price of the new option"
        }
      },
      "createShort(address,address,address,uint256)": {
        "params": {
          "depositAmount": "is the amount of collateral to deposit",
          "gammaController": "is the address of the opyn controller contract",
          "marginPool": "is the address of the opyn margin contract which holds the collateral",
          "oTokenAddress": "is the address of the otoken to mint"
        },
        "returns": {
          "_0": "the otoken mint amount"
        }
      },
      "placeBid(GnosisAuction.BidDetails)": {
        "params": {
          "bidDetails": "is the struct with all the details of the bid including the auction's id and how much to bid"
        }
      },
      "rollover(Vault.VaultState storage,VaultLifecycleTreasury.RolloverParams)": {
        "params": {
          "params": "is the rollover parameters passed to compute the next state",
          "vaultState": "is the storage variable vaultState passed from RibbonVault"
        },
        "returns": {
          "managementFeeInAsset": "is the amount of management fee charged by vault",
          "mintShares": "is the amount of shares to mint from deposits",
          "newLockedAmount": "is the amount of funds to allocate for the new round",
          "newPricePerShare": "is the price per share of the new round",
          "queuedWithdrawAmount": "is the amount of funds set aside for withdrawal"
        }
      },
      "settleLong(address,address,address)": {
        "params": {
          "asset": "is the address of the vault's asset",
          "gammaController": "is the address of the opyn controller contract",
          "oldOption": "is the address of the old option"
        },
        "returns": {
          "_0": "amount of asset received by exercising the option"
        }
      },
      "settleShort(address)": {
        "params": {
          "gammaController": "is the address of the opyn controller contract"
        },
        "returns": {
          "_0": "amount of collateral redeemed from the vault"
        }
      },
      "startAuction(GnosisAuction.AuctionDetails)": {
        "params": {
          "auctionDetails": "is the struct with all the custom parameters of the auction"
        },
        "returns": {
          "_0": "the auction id of the newly created auction"
        }
      },
      "verifyInitializerParams(VaultLifecycleTreasury.InitParams,Vault.VaultParams,uint256)": {
        "params": {
          "_initParams": "is the initialization parameter including owner, keeper, etc.",
          "_vaultParams": "is the struct with vault general data"
        }
      }
    },
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "burnOtokens(address,address)": {
        "notice": "Burn the remaining oTokens left over from auction. Currently this implementation is simple. It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time."
      },
      "claimAuctionOtokens(Vault.AuctionSellOrder,address,address)": {
        "notice": "Claims the oTokens belonging to the vault"
      },
      "commitAndClose(address,address,uint256,VaultLifecycleTreasury.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)": {
        "notice": "Sets the next option the vault will be shorting, and calculates its premium for the auction"
      },
      "createShort(address,address,address,uint256)": {
        "notice": "Creates the actual Opyn short position by depositing collateral and minting otokens"
      },
      "placeBid(GnosisAuction.BidDetails)": {
        "notice": "Places a bid in an auction"
      },
      "rollover(Vault.VaultState storage,VaultLifecycleTreasury.RolloverParams)": {
        "notice": "Calculate the shares to mint, new price per share, and amount of funds to re-allocate as collateral for the new round"
      },
      "settleLong(address,address,address)": {
        "notice": "Exercises the ITM option using existing long otoken position. Currently this implementation is simple. It calls the `Redeem` action to claim the payout."
      },
      "settleShort(address)": {
        "notice": "Close the existing short otoken position. Currently this implementation is simple. It closes the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by calling SettleVault action, this assumption should hold."
      },
      "startAuction(GnosisAuction.AuctionDetails)": {
        "notice": "Starts the gnosis auction"
      },
      "verifyInitializerParams(VaultLifecycleTreasury.InitParams,Vault.VaultParams,uint256)": {
        "notice": "Verify the constructor params satisfy requirements"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}